<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Burton Corporation</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@300;400;600&family=Work+Sans:wght@200;300;400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --color-bg: #0a0a0a;
            --color-surface: #0f0f0f;
            --color-surface-alt: #141414;
            --color-text: #ffffff;
            --color-text-muted: #999999;
            --color-text-subtle: #666666;
            --color-accent: #1a2332;
            --font-display: 'Cormorant Garamond', serif;
            --font-body: 'Work Sans', sans-serif;
        }

        /* Loader */
        .page-loader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: var(--color-bg);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            transition: opacity 1.5s cubic-bezier(0.4, 0, 0.2, 1), visibility 1.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .page-loader.hidden {
            opacity: 0;
            visibility: hidden;
        }

        .loader-content {
            text-align: center;
        }

        .loader-logo {
            font-family: var(--font-display);
            font-size: 2.5rem;
            font-weight: 300;
            letter-spacing: 0.3em;
            color: var(--color-text);
            opacity: 0;
            animation: loaderFade 2s ease-in-out forwards;
        }

        .loader-line {
            width: 200px;
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--color-text-muted), transparent);
            margin: 2rem auto 0;
            opacity: 0;
            animation: loaderLineFade 2s ease-in-out 0.5s forwards;
        }

        @keyframes loaderFade {
            0% {
                opacity: 0;
                transform: translateY(20px);
            }
            50% {
                opacity: 1;
                transform: translateY(0);
            }
            100% {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes loaderLineFade {
            0% {
                opacity: 0;
                transform: scaleX(0);
            }
            50% {
                opacity: 1;
                transform: scaleX(1);
            }
            100% {
                opacity: 1;
                transform: scaleX(1);
            }
        }

        /* Page content hidden until loaded */
        body.loading {
            overflow: hidden;
        }

        body.loading .main-content {
            opacity: 0;
        }

        .main-content {
            opacity: 0;
            animation: contentFadeIn 1.8s cubic-bezier(0.4, 0, 0.2, 1) 0.5s forwards;
        }

        @keyframes contentFadeIn {
            to {
                opacity: 1;
            }
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: var(--font-body);
            background-color: var(--color-bg);
            color: var(--color-text);
            overflow-x: hidden;
            line-height: 1.6;
            font-weight: 300;
        }

        /* Navigation */
        nav {
            position: fixed;
            top: 0;
            width: 100%;
            padding: 2.5rem 5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 1000;
            transition: all 0.9s cubic-bezier(0.4, 0, 0.2, 1);
        }

        nav.scrolled {
            background-color: rgba(10, 10, 10, 0.85);
            backdrop-filter: blur(30px) saturate(180%);
            border-bottom: 1px solid rgba(255, 255, 255, 0.04);
            padding: 1.8rem 5rem;
        }

        .logo {
            font-family: var(--font-display);
            font-size: 1.6rem;
            font-weight: 300;
            letter-spacing: 0.2em;
            color: var(--color-text);
            text-decoration: none;
            opacity: 0;
            animation: fadeInUp 2s cubic-bezier(0.4, 0, 0.2, 1) forwards 0.5s;
        }

        .nav-links {
            display: flex;
            gap: 3.5rem;
            list-style: none;
            opacity: 0;
            animation: fadeInUp 2s cubic-bezier(0.4, 0, 0.2, 1) forwards 0.8s;
        }

        .nav-links a {
            color: var(--color-text-muted);
            text-decoration: none;
            font-size: 0.8rem;
            letter-spacing: 0.15em;
            text-transform: uppercase;
            transition: color 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            font-weight: 300;
            position: relative;
        }

        .nav-links a::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 0;
            height: 1px;
            background-color: var(--color-text);
            transition: width 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .nav-links a:hover {
            color: var(--color-text);
        }

        .nav-links a:hover::after {
            width: 100%;
        }

        /* Section commune */
        section {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 12rem 5rem;
            position: relative;
        }

        section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            opacity: 0;
            transition: opacity 1.2s cubic-bezier(0.4, 0, 0.2, 1);
            pointer-events: none;
        }

        .container {
            max-width: 1400px;
            width: 100%;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }

        /* Hero Section */
        .hero {
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
            background: radial-gradient(ellipse at 50% 40%, rgba(20, 30, 45, 0.15) 0%, var(--color-bg) 60%);
        }

        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 80%, rgba(26, 35, 50, 0.08) 0%, transparent 40%),
                radial-gradient(circle at 80% 20%, rgba(26, 35, 50, 0.08) 0%, transparent 40%);
            pointer-events: none;
            animation: subtleGlow 15s ease-in-out infinite;
        }

        @keyframes subtleGlow {
            0%, 100% {
                opacity: 0.3;
            }
            50% {
                opacity: 0.6;
            }
        }

        .hero-content {
            text-align: center;
            z-index: 1;
        }

        .hero h1 {
            font-family: var(--font-display);
            font-size: 6rem;
            font-weight: 300;
            letter-spacing: 0.2em;
            margin-bottom: 3rem;
            opacity: 0;
            animation: heroTitleAppear 2.5s cubic-bezier(0.4, 0, 0.2, 1) forwards 1.2s;
        }

        @keyframes heroTitleAppear {
            0% {
                opacity: 0;
                transform: translateY(60px);
                letter-spacing: 0.4em;
            }
            100% {
                opacity: 1;
                transform: translateY(0);
                letter-spacing: 0.2em;
            }
        }

        .hero-tagline {
            font-size: 1.15rem;
            letter-spacing: 0.3em;
            text-transform: uppercase;
            color: var(--color-text-muted);
            font-weight: 300;
            opacity: 0;
            animation: fadeInUp 2s cubic-bezier(0.4, 0, 0.2, 1) forwards 2s;
        }

        .scroll-indicator {
            position: absolute;
            bottom: 5rem;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            animation: fadeInUp 2s cubic-bezier(0.4, 0, 0.2, 1) forwards 2.8s, float 4s ease-in-out infinite 3.5s;
        }

        .scroll-line {
            width: 1px;
            height: 70px;
            background: linear-gradient(to bottom, transparent, var(--color-text-subtle), transparent);
        }

        /* Introduction */
        .intro {
            background: linear-gradient(to bottom, var(--color-bg) 0%, var(--color-surface) 50%, var(--color-bg) 100%);
        }

        .intro::before {
            background: radial-gradient(ellipse at 50% 50%, rgba(255, 255, 255, 0.01) 0%, transparent 60%);
            opacity: 1;
        }

        .intro-content {
            max-width: 950px;
            margin: 0 auto;
            text-align: center;
        }

        .intro-content p {
            font-size: 2.2rem;
            line-height: 2;
            font-weight: 300;
            color: var(--color-text);
            font-family: var(--font-display);
            letter-spacing: 0.02em;
        }

        .section-number {
            font-size: 0.7rem;
            letter-spacing: 0.25em;
            color: var(--color-text-subtle);
            margin-bottom: 4rem;
            display: block;
            text-transform: uppercase;
            font-weight: 400;
        }

        /* Vision */
        .vision::before {
            background: radial-gradient(circle at 80% 20%, rgba(26, 35, 50, 0.04) 0%, transparent 50%);
            opacity: 1;
        }

        .vision-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8rem;
            max-width: 1200px;
            margin: 0 auto;
            margin-top: 6rem;
        }

        .vision-card {
            padding: 5rem;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.015) 0%, rgba(255, 255, 255, 0.00) 100%);
            border: 1px solid rgba(255, 255, 255, 0.04);
            transition: all 1.2s cubic-bezier(0.4, 0, 0.2, 1);
            opacity: 0;
            transform: translateY(60px);
        }

        .vision-card.reveal {
            opacity: 1;
            transform: translateY(0);
        }

        .vision-card:hover {
            border-color: rgba(255, 255, 255, 0.1);
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.03) 0%, rgba(255, 255, 255, 0.005) 100%);
            transform: translateY(-5px);
        }

        .vision-card h3 {
            font-family: var(--font-display);
            font-size: 2.8rem;
            font-weight: 300;
            margin-bottom: 2.5rem;
            letter-spacing: 0.1em;
        }

        .vision-card p {
            font-size: 1.05rem;
            line-height: 2;
            color: var(--color-text-muted);
            font-weight: 300;
        }

        /* Progression */
        .progression {
            background: linear-gradient(to bottom, var(--color-bg) 0%, var(--color-surface-alt) 50%, var(--color-bg) 100%);
        }

        .progression::before {
            background: radial-gradient(ellipse at 20% 50%, rgba(255, 255, 255, 0.01) 0%, transparent 60%);
            opacity: 1;
        }

        .progression-timeline {
            max-width: 850px;
            margin: 6rem auto 0;
            position: relative;
        }

        .progression-timeline::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 1px;
            background: linear-gradient(to bottom, transparent, rgba(255, 255, 255, 0.08), transparent);
        }

        .progression-step {
            padding: 3rem 0 3rem 5rem;
            position: relative;
            opacity: 0;
            transform: translateX(-40px);
            transition: all 1.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .progression-step.reveal {
            opacity: 1;
            transform: translateX(0);
        }

        .progression-step::before {
            content: '';
            position: absolute;
            left: -4px;
            top: 50%;
            transform: translateY(-50%);
            width: 9px;
            height: 9px;
            background-color: var(--color-text);
            border-radius: 50%;
            transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 0 0 0 rgba(255, 255, 255, 0.2);
        }

        .progression-step:hover::before {
            width: 13px;
            height: 13px;
            left: -6px;
            box-shadow: 0 0 0 8px rgba(255, 255, 255, 0.05);
        }

        .progression-step h4 {
            font-family: var(--font-display);
            font-size: 2rem;
            font-weight: 400;
            margin-bottom: 0.8rem;
            letter-spacing: 0.06em;
        }

        .progression-step p {
            color: var(--color-text-muted);
            font-size: 1rem;
            line-height: 2;
        }

        /* Sélection */
        .selection::before {
            background: radial-gradient(circle at 50% 50%, rgba(26, 35, 50, 0.06) 0%, transparent 60%);
            opacity: 1;
        }

        .selection-stats {
            display: flex;
            justify-content: center;
            gap: 10rem;
            max-width: 1100px;
            margin: 6rem auto 0;
        }

        .stat {
            text-align: center;
            opacity: 0;
            transform: scale(0.9);
            transition: all 1.6s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .stat.reveal {
            opacity: 1;
            transform: scale(1);
        }

        .stat-number {
            font-family: var(--font-display);
            font-size: 6rem;
            font-weight: 300;
            display: block;
            margin-bottom: 2rem;
            background: linear-gradient(135deg, #ffffff 0%, #777777 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: 0.05em;
        }

        .stat-label {
            font-size: 0.85rem;
            letter-spacing: 0.2em;
            text-transform: uppercase;
            color: var(--color-text-muted);
            font-weight: 300;
        }

        /* Procédure */
        .procedure {
            background: linear-gradient(to bottom, var(--color-bg) 0%, var(--color-surface) 50%, var(--color-bg) 100%);
        }

        .procedure::before {
            background: radial-gradient(ellipse at 70% 30%, rgba(255, 255, 255, 0.015) 0%, transparent 60%);
            opacity: 1;
        }

        .procedure-steps {
            max-width: 1100px;
            margin: 6rem auto 0;
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 5rem;
        }

        .procedure-step {
            text-align: center;
            opacity: 0;
            transform: translateY(60px);
            transition: all 1.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .procedure-step.reveal {
            opacity: 1;
            transform: translateY(0);
        }

        .step-number {
            font-family: var(--font-display);
            font-size: 5rem;
            font-weight: 300;
            color: rgba(255, 255, 255, 0.06);
            margin-bottom: 2.5rem;
            letter-spacing: 0.1em;
            transition: color 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .procedure-step:hover .step-number {
            color: rgba(255, 255, 255, 0.12);
        }

        .procedure-step h4 {
            font-family: var(--font-display);
            font-size: 1.6rem;
            font-weight: 400;
            margin-bottom: 1.8rem;
            letter-spacing: 0.06em;
        }

        .procedure-step p {
            color: var(--color-text-muted);
            font-size: 0.95rem;
            line-height: 2;
        }

        /* CTA */
        .cta {
            min-height: 100vh;
            background: 
                radial-gradient(ellipse at 50% 30%, rgba(20, 30, 45, 0.2) 0%, transparent 60%),
                radial-gradient(ellipse at 50% 70%, rgba(26, 35, 50, 0.15) 0%, transparent 60%);
        }

        .cta::before {
            background: radial-gradient(circle at 50% 50%, rgba(255, 255, 255, 0.02) 0%, transparent 50%);
            opacity: 1;
        }

        .cta-content {
            text-align: center;
        }

        .cta h2 {
            font-family: var(--font-display);
            font-size: 4rem;
            font-weight: 300;
            margin-bottom: 5rem;
            letter-spacing: 0.12em;
        }

        .cta-button {
            display: inline-block;
            padding: 1.8rem 5rem;
            background-color: transparent;
            color: var(--color-text);
            text-decoration: none;
            border: 1px solid rgba(255, 255, 255, 0.15);
            font-size: 0.8rem;
            letter-spacing: 0.25em;
            text-transform: uppercase;
            transition: all 0.9s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            font-weight: 300;
        }

        .cta-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.04);
            transition: left 0.9s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .cta-button:hover::before {
            left: 100%;
        }

        .cta-button:hover {
            border-color: rgba(255, 255, 255, 0.35);
            transform: translateY(-3px);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
        }

        .cta-disclaimer {
            margin-top: 5rem;
            font-size: 0.75rem;
            color: var(--color-text-subtle);
            letter-spacing: 0.15em;
        }

        /* Section Titles */
        .section-title {
            text-align: center;
            margin-bottom: 4rem;
        }

        .section-title h2 {
            font-family: var(--font-display);
            font-size: 4rem;
            font-weight: 300;
            letter-spacing: 0.12em;
            margin-bottom: 1.5rem;
        }

        .section-title .subtitle {
            font-size: 0.95rem;
            color: var(--color-text-muted);
            letter-spacing: 0.2em;
            text-transform: uppercase;
            font-weight: 300;
        }

        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes float {
            0%, 100% {
                transform: translateX(-50%) translateY(0);
            }
            50% {
                transform: translateX(-50%) translateY(-15px);
            }
        }

        /* Cursor personnalisé subtil */
        body {
            cursor: default;
        }

        a, button {
            cursor: pointer;
        }

        /* Responsive */
        @media (max-width: 1024px) {
            nav {
                padding: 1.8rem 3rem;
            }

            nav.scrolled {
                padding: 1.5rem 3rem;
            }

            .nav-links {
                gap: 2.5rem;
            }

            .hero h1 {
                font-size: 4.5rem;
            }

            .vision-grid,
            .procedure-steps {
                grid-template-columns: 1fr;
                gap: 4rem;
            }

            .selection-stats {
                flex-direction: column;
                gap: 5rem;
            }

            section {
                padding: 8rem 3rem;
            }

            .section-title h2 {
                font-size: 3.2rem;
            }
        }

        @media (max-width: 768px) {
            .hero h1 {
                font-size: 3.5rem;
                letter-spacing: 0.15em;
            }

            .hero-tagline {
                font-size: 0.85rem;
                letter-spacing: 0.2em;
            }

            .intro-content p {
                font-size: 1.7rem;
            }

            .section-title h2 {
                font-size: 2.8rem;
            }

            .nav-links {
                display: none;
            }

            .cta h2 {
                font-size: 2.8rem;
            }

            .stat-number {
                font-size: 4.5rem;
            }

            section {
                padding: 6rem 2rem;
            }

            nav {
                padding: 1.5rem 2rem;
            }

            nav.scrolled {
                padding: 1.2rem 2rem;
            }

            .vision-card,
            .procedure-step {
                padding: 3rem;
            }

            .cta-button {
                padding: 1.5rem 3.5rem;
                font-size: 0.75rem;
            }
        }

        /* Smooth reveal effect */
        .reveal-element {
            opacity: 0;
            transform: translateY(60px);
            transition: all 1.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .reveal-element.reveal {
            opacity: 1;
            transform: translateY(0);
        }

        /* ========================================
           BRANCHES OVERLAY
        ======================================== */

        .branches-overlay {
            position: fixed;
            inset: 0;
            background: #080808;
            z-index: 45000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.7s cubic-bezier(0.4,0,0.2,1), visibility 0.7s;
            overflow-y: auto;
            scrollbar-width: thin;
            scrollbar-color: rgba(255,255,255,0.06) transparent;
        }

        .branches-overlay::-webkit-scrollbar { width: 2px; }
        .branches-overlay::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.06); }

        .branches-overlay.open {
            opacity: 1;
            visibility: visible;
        }

        .branches-header {
            position: sticky;
            top: 0;
            padding: 2.5rem 5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(8,8,8,0.9);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(255,255,255,0.04);
            z-index: 10;
        }

        .branches-header-left {
            display: flex;
            align-items: center;
            gap: 2rem;
        }

        .branches-logo {
            font-family: var(--font-display);
            font-size: 1.1rem;
            font-weight: 300;
            letter-spacing: 0.35em;
            color: rgba(255,255,255,0.3);
        }

        .branches-title {
            font-family: var(--font-display);
            font-size: 1rem;
            font-weight: 300;
            letter-spacing: 0.2em;
            color: rgba(255,255,255,0.6);
        }

        .branches-close {
            background: none;
            border: none;
            color: rgba(255,255,255,0.3);
            font-family: var(--font-body);
            font-size: 0.65rem;
            letter-spacing: 0.22em;
            text-transform: uppercase;
            cursor: pointer;
            transition: color 0.3s;
        }

        .branches-close:hover { color: rgba(255,255,255,0.7); }

        /* Branch tabs */
        .branches-tabs {
            display: flex;
            gap: 0;
            padding: 0 5rem;
            border-bottom: 1px solid rgba(255,255,255,0.05);
            overflow-x: auto;
            scrollbar-width: none;
        }

        .branches-tabs::-webkit-scrollbar { display: none; }

        .branch-tab {
            background: none;
            border: none;
            border-bottom: 1px solid transparent;
            color: rgba(255,255,255,0.25);
            font-family: var(--font-body);
            font-size: 0.65rem;
            letter-spacing: 0.25em;
            text-transform: uppercase;
            padding: 1.4rem 2rem;
            cursor: pointer;
            transition: all 0.4s ease;
            white-space: nowrap;
            margin-bottom: -1px;
        }

        .branch-tab:hover {
            color: rgba(255,255,255,0.6);
        }

        .branch-tab.active {
            color: rgba(255,255,255,0.9);
            border-bottom-color: rgba(255,255,255,0.4);
        }

        /* Branch panels */
        .branches-content {
            padding: 0;
        }

        .branch-panel {
            display: none;
            animation: stepReveal 0.5s cubic-bezier(0.4,0,0.2,1) forwards;
        }

        .branch-panel.active { display: block; }

        /* Hero band */
        .branch-hero {
            min-height: 55vh;
            display: flex;
            align-items: flex-end;
            padding: 5rem;
            position: relative;
            overflow: hidden;
        }

        .branch-hero-bg {
            position: absolute;
            inset: 0;
            opacity: 0.07;
            background-size: cover;
            background-position: center;
            filter: grayscale(100%);
        }

        .branch-hero-gradient {
            position: absolute;
            inset: 0;
        }

        .branch-hero-content { position: relative; z-index: 1; max-width: 700px; }

        .branch-eyebrow {
            font-size: 0.6rem;
            letter-spacing: 0.4em;
            text-transform: uppercase;
            color: rgba(255,255,255,0.3);
            margin-bottom: 1.5rem;
        }

        .branch-name {
            font-family: var(--font-display);
            font-size: 5rem;
            font-weight: 300;
            letter-spacing: 0.12em;
            line-height: 1;
            margin-bottom: 2rem;
        }

        .branch-tagline {
            font-size: 1rem;
            color: rgba(255,255,255,0.45);
            font-weight: 300;
            letter-spacing: 0.12em;
            line-height: 1.8;
        }

        /* Branch body */
        .branch-body {
            padding: 5rem;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 6rem;
            max-width: 1300px;
            margin: 0 auto;
        }

        .branch-desc {
            font-size: 1.05rem;
            color: rgba(255,255,255,0.5);
            line-height: 2.2;
            font-weight: 300;
            font-family: var(--font-display);
        }

        .branch-details { }

        .branch-detail-row {
            display: flex;
            gap: 2rem;
            padding: 1.4rem 0;
            border-bottom: 1px solid rgba(255,255,255,0.04);
        }

        .branch-detail-key {
            font-size: 0.6rem;
            letter-spacing: 0.25em;
            text-transform: uppercase;
            color: rgba(255,255,255,0.25);
            min-width: 120px;
            flex-shrink: 0;
            padding-top: 2px;
        }

        .branch-detail-val {
            font-size: 0.85rem;
            color: rgba(255,255,255,0.6);
            font-weight: 300;
            line-height: 1.7;
        }

        /* Products grid */
        .branch-products {
            padding: 0 5rem 5rem;
            max-width: 1300px;
            margin: 0 auto;
        }

        .branch-products-title {
            font-size: 0.6rem;
            letter-spacing: 0.3em;
            text-transform: uppercase;
            color: rgba(255,255,255,0.2);
            margin-bottom: 2.5rem;
            padding-top: 1rem;
            border-top: 1px solid rgba(255,255,255,0.04);
        }

        .branch-products-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1.5rem;
        }

        .branch-product-card {
            background: rgba(255,255,255,0.02);
            border: 1px solid rgba(255,255,255,0.05);
            padding: 2.5rem 2rem;
            transition: all 0.5s cubic-bezier(0.4,0,0.2,1);
        }

        .branch-product-card:hover {
            background: rgba(255,255,255,0.04);
            border-color: rgba(255,255,255,0.1);
            transform: translateY(-4px);
        }

        .product-num {
            font-family: var(--font-display);
            font-size: 2.5rem;
            font-weight: 300;
            color: rgba(255,255,255,0.06);
            margin-bottom: 1.5rem;
            letter-spacing: 0.05em;
        }

        .product-name {
            font-family: var(--font-display);
            font-size: 1.2rem;
            font-weight: 400;
            letter-spacing: 0.08em;
            margin-bottom: 0.8rem;
        }

        .product-desc {
            font-size: 0.78rem;
            color: rgba(255,255,255,0.35);
            line-height: 1.9;
            font-weight: 300;
        }

        @media (max-width: 768px) {
            .branches-header { padding: 1.8rem 2rem; }
            .branches-tabs { padding: 0 2rem; }
            .branch-hero { padding: 3rem 2rem; min-height: 40vh; }
            .branch-name { font-size: 3rem; }
            .branch-body { grid-template-columns: 1fr; gap: 3rem; padding: 3rem 2rem; }
            .branch-products { padding: 0 2rem 3rem; }
            .branch-products-grid { grid-template-columns: 1fr; }
        }

        /* ========================================
           PANNEAU ADMIN
        ======================================== */

        /* Lock screen */
        .admin-overlay {
            position: fixed;
            inset: 0;
            background: #080808;
            z-index: 60000;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.6s cubic-bezier(0.4,0,0.2,1), visibility 0.6s;
        }

        .admin-overlay.open { opacity: 1; visibility: visible; }

        /* Lock screen */
        .admin-lock {
            text-align: center;
            animation: stepReveal 0.5s cubic-bezier(0.4,0,0.2,1) forwards;
        }

        .admin-lock-logo {
            font-family: var(--font-display);
            font-size: 1.2rem;
            font-weight: 300;
            letter-spacing: 0.4em;
            color: rgba(255,255,255,0.25);
            margin-bottom: 3rem;
        }

        .admin-lock-title {
            font-family: var(--font-display);
            font-size: 2rem;
            font-weight: 300;
            letter-spacing: 0.15em;
            color: var(--color-text);
            margin-bottom: 0.6rem;
        }

        .admin-lock-sub {
            font-size: 0.72rem;
            letter-spacing: 0.2em;
            color: var(--color-text-subtle);
            margin-bottom: 3rem;
            text-transform: uppercase;
        }

        .admin-pin-row {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin-bottom: 2rem;
        }

        .admin-pin-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            border: 1px solid rgba(255,255,255,0.2);
            background: transparent;
            transition: background 0.3s ease, border-color 0.3s ease;
        }

        .admin-pin-dot.filled {
            background: rgba(255,255,255,0.6);
            border-color: rgba(255,255,255,0.6);
        }

        .admin-keypad {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 0.8rem;
            max-width: 260px;
            margin: 0 auto 1.5rem;
        }

        .admin-key {
            background: rgba(255,255,255,0.03);
            border: 1px solid rgba(255,255,255,0.07);
            color: var(--color-text);
            font-family: var(--font-display);
            font-size: 1.4rem;
            font-weight: 300;
            padding: 1.1rem;
            cursor: pointer;
            transition: all 0.25s ease;
            letter-spacing: 0.05em;
        }

        .admin-key:hover {
            background: rgba(255,255,255,0.07);
            border-color: rgba(255,255,255,0.18);
        }

        .admin-key:active { transform: scale(0.95); }

        .admin-key.del {
            font-family: var(--font-body);
            font-size: 0.75rem;
            letter-spacing: 0.15em;
            color: var(--color-text-subtle);
        }

        .admin-key.zero { grid-column: 2; }

        .admin-lock-error {
            font-size: 0.65rem;
            letter-spacing: 0.2em;
            color: rgba(255,80,80,0.7);
            text-transform: uppercase;
            height: 1rem;
            transition: opacity 0.3s;
            opacity: 0;
        }

        .admin-lock-error.show { opacity: 1; }

        .admin-close-lock {
            margin-top: 3rem;
            background: none;
            border: none;
            color: var(--color-text-subtle);
            font-family: var(--font-body);
            font-size: 0.65rem;
            letter-spacing: 0.2em;
            text-transform: uppercase;
            cursor: pointer;
            transition: color 0.3s;
        }

        .admin-close-lock:hover { color: var(--color-text-muted); }

        /* Dashboard */
        .admin-dashboard {
            display: none;
            flex-direction: column;
            height: 100%;
            width: 100%;
            overflow: hidden;
        }

        .admin-dashboard.visible { display: flex; }

        .admin-header {
            padding: 2rem 4rem;
            border-bottom: 1px solid rgba(255,255,255,0.05);
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-shrink: 0;
        }

        .admin-header-left { display: flex; align-items: center; gap: 2.5rem; }

        .admin-logo {
            font-family: var(--font-display);
            font-size: 1.1rem;
            font-weight: 300;
            letter-spacing: 0.3em;
            color: rgba(255,255,255,0.3);
        }

        .admin-title {
            font-family: var(--font-display);
            font-size: 1.5rem;
            font-weight: 300;
            letter-spacing: 0.1em;
        }

        .admin-badge-total {
            font-size: 0.65rem;
            letter-spacing: 0.2em;
            color: var(--color-text-subtle);
            text-transform: uppercase;
            background: rgba(255,255,255,0.04);
            border: 1px solid rgba(255,255,255,0.07);
            padding: 0.4rem 1rem;
        }

        .admin-header-right { display: flex; align-items: center; gap: 1.5rem; }

        .admin-filter-bar {
            display: flex;
            gap: 0.5rem;
        }

        .admin-filter-btn {
            background: none;
            border: 1px solid rgba(255,255,255,0.07);
            color: var(--color-text-subtle);
            font-family: var(--font-body);
            font-size: 0.6rem;
            letter-spacing: 0.18em;
            text-transform: uppercase;
            padding: 0.5rem 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .admin-filter-btn.active,
        .admin-filter-btn:hover {
            border-color: rgba(255,255,255,0.25);
            color: var(--color-text);
        }

        .admin-exit {
            background: none;
            border: none;
            color: var(--color-text-subtle);
            font-family: var(--font-body);
            font-size: 0.65rem;
            letter-spacing: 0.2em;
            text-transform: uppercase;
            cursor: pointer;
            transition: color 0.3s;
        }

        .admin-exit:hover { color: var(--color-text); }

        /* Search */
        .admin-search-row {
            padding: 1.4rem 4rem;
            border-bottom: 1px solid rgba(255,255,255,0.04);
            flex-shrink: 0;
        }

        .admin-search {
            width: 100%;
            max-width: 400px;
            background: rgba(255,255,255,0.025);
            border: 1px solid rgba(255,255,255,0.07);
            color: var(--color-text);
            font-family: var(--font-body);
            font-size: 0.8rem;
            font-weight: 300;
            padding: 0.7rem 1.2rem;
            outline: none;
            letter-spacing: 0.08em;
            transition: border-color 0.3s;
        }

        .admin-search::placeholder { color: var(--color-text-subtle); }
        .admin-search:focus { border-color: rgba(255,255,255,0.2); }

        /* Table */
        .admin-body {
            flex: 1;
            overflow-y: auto;
            padding: 2rem 4rem 4rem;
            scrollbar-width: thin;
            scrollbar-color: rgba(255,255,255,0.08) transparent;
        }

        .admin-body::-webkit-scrollbar { width: 3px; }
        .admin-body::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.08); }

        /* Stats row */
        .admin-stats-row {
            display: flex;
            gap: 1.5rem;
            margin-bottom: 3rem;
        }

        .admin-stat-card {
            flex: 1;
            background: rgba(255,255,255,0.02);
            border: 1px solid rgba(255,255,255,0.05);
            padding: 1.5rem 2rem;
        }

        .admin-stat-val {
            font-family: var(--font-display);
            font-size: 2.2rem;
            font-weight: 300;
            letter-spacing: 0.06em;
            color: var(--color-text);
        }

        .admin-stat-lbl {
            font-size: 0.6rem;
            letter-spacing: 0.22em;
            text-transform: uppercase;
            color: var(--color-text-subtle);
            margin-top: 0.4rem;
        }

        /* Table */
        .admin-table-wrap { overflow-x: auto; }

        .admin-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.82rem;
        }

        .admin-table thead tr {
            border-bottom: 1px solid rgba(255,255,255,0.06);
        }

        .admin-table th {
            text-align: left;
            padding: 0 1.2rem 1rem 0;
            font-size: 0.58rem;
            letter-spacing: 0.25em;
            text-transform: uppercase;
            color: var(--color-text-subtle);
            font-weight: 400;
            white-space: nowrap;
        }

        .admin-table tbody tr {
            border-bottom: 1px solid rgba(255,255,255,0.03);
            transition: background 0.25s ease;
            cursor: pointer;
        }

        .admin-table tbody tr:hover {
            background: rgba(255,255,255,0.025);
        }

        .admin-table td {
            padding: 1.2rem 1.2rem 1.2rem 0;
            color: var(--color-text-muted);
            font-weight: 300;
            vertical-align: top;
        }

        .admin-table td.name-col {
            color: var(--color-text);
            font-weight: 400;
            letter-spacing: 0.04em;
        }

        .badge {
            display: inline-block;
            padding: 0.25rem 0.8rem;
            font-size: 0.58rem;
            letter-spacing: 0.18em;
            text-transform: uppercase;
            font-weight: 400;
            border: 1px solid;
        }

        .badge-new {
            color: rgba(180,220,180,0.9);
            border-color: rgba(180,220,180,0.2);
            background: rgba(180,220,180,0.05);
        }

        .badge-review {
            color: rgba(220,200,140,0.9);
            border-color: rgba(220,200,140,0.2);
            background: rgba(220,200,140,0.05);
        }

        .badge-accepted {
            color: rgba(140,200,220,0.9);
            border-color: rgba(140,200,220,0.2);
            background: rgba(140,200,220,0.05);
        }

        .badge-rejected {
            color: rgba(200,140,140,0.9);
            border-color: rgba(200,140,140,0.2);
            background: rgba(200,140,140,0.05);
        }

        /* Detail panel */
        .admin-detail {
            position: fixed;
            right: 0;
            top: 0;
            width: 480px;
            height: 100%;
            background: #0c0c0c;
            border-left: 1px solid rgba(255,255,255,0.06);
            z-index: 70000;
            transform: translateX(100%);
            transition: transform 0.5s cubic-bezier(0.4,0,0.2,1);
            overflow-y: auto;
            scrollbar-width: thin;
            scrollbar-color: rgba(255,255,255,0.06) transparent;
        }

        .admin-detail.open { transform: translateX(0); }

        .admin-detail::-webkit-scrollbar { width: 2px; }
        .admin-detail::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.06); }

        .detail-header {
            padding: 2.5rem 3rem;
            border-bottom: 1px solid rgba(255,255,255,0.05);
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            background: #0c0c0c;
            z-index: 1;
        }

        .detail-close {
            background: none;
            border: none;
            color: var(--color-text-subtle);
            font-family: var(--font-body);
            font-size: 0.65rem;
            letter-spacing: 0.2em;
            text-transform: uppercase;
            cursor: pointer;
            transition: color 0.3s;
        }

        .detail-close:hover { color: var(--color-text); }

        .detail-body { padding: 2.5rem 3rem; }

        .detail-name {
            font-family: var(--font-display);
            font-size: 2rem;
            font-weight: 300;
            letter-spacing: 0.08em;
            margin-bottom: 0.4rem;
        }

        .detail-ref {
            font-size: 0.6rem;
            letter-spacing: 0.25em;
            color: var(--color-text-subtle);
            text-transform: uppercase;
            margin-bottom: 2.5rem;
        }

        .detail-section {
            margin-bottom: 2rem;
        }

        .detail-section-title {
            font-size: 0.58rem;
            letter-spacing: 0.28em;
            text-transform: uppercase;
            color: var(--color-text-subtle);
            margin-bottom: 1rem;
            padding-bottom: 0.6rem;
            border-bottom: 1px solid rgba(255,255,255,0.04);
        }

        .detail-row {
            display: flex;
            gap: 1rem;
            margin-bottom: 0.8rem;
        }

        .detail-key {
            font-size: 0.65rem;
            letter-spacing: 0.15em;
            color: var(--color-text-subtle);
            text-transform: uppercase;
            min-width: 100px;
            flex-shrink: 0;
        }

        .detail-val {
            font-size: 0.82rem;
            color: var(--color-text-muted);
            font-weight: 300;
            line-height: 1.6;
        }

        .detail-text-block {
            font-size: 0.82rem;
            color: var(--color-text-muted);
            font-weight: 300;
            line-height: 1.9;
            background: rgba(255,255,255,0.02);
            border: 1px solid rgba(255,255,255,0.04);
            padding: 1.2rem 1.4rem;
            margin-bottom: 1.2rem;
        }

        .detail-actions {
            display: flex;
            gap: 0.8rem;
            margin-top: 2.5rem;
            padding-top: 2rem;
            border-top: 1px solid rgba(255,255,255,0.05);
        }

        .btn-action {
            flex: 1;
            padding: 0.9rem 1rem;
            background: none;
            font-family: var(--font-body);
            font-size: 0.62rem;
            letter-spacing: 0.2em;
            text-transform: uppercase;
            cursor: pointer;
            border: 1px solid rgba(255,255,255,0.1);
            color: var(--color-text-muted);
            transition: all 0.35s ease;
        }

        .btn-action:hover {
            border-color: rgba(255,255,255,0.3);
            color: var(--color-text);
        }

        .btn-action.accept { border-color: rgba(140,200,220,0.25); color: rgba(140,200,220,0.8); }
        .btn-action.accept:hover { background: rgba(140,200,220,0.06); border-color: rgba(140,200,220,0.5); color: rgba(140,200,220,1); }
        .btn-action.reject { border-color: rgba(200,140,140,0.25); color: rgba(200,140,140,0.8); }
        .btn-action.reject:hover { background: rgba(200,140,140,0.06); border-color: rgba(200,140,140,0.5); color: rgba(200,140,140,1); }

        /* Empty state */
        .admin-empty {
            text-align: center;
            padding: 8rem 2rem;
            color: var(--color-text-subtle);
        }

        .admin-empty-icon {
            font-family: var(--font-display);
            font-size: 3rem;
            opacity: 0.15;
            margin-bottom: 2rem;
        }

        .admin-empty-text {
            font-size: 0.75rem;
            letter-spacing: 0.22em;
            text-transform: uppercase;
        }

        /* Grain texture overlay pour effet cinématographique */
        body::after {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='2.5' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
            opacity: 0.015;
            pointer-events: none;
            z-index: 10000;
        }

        /* ========================================
           MODAL CANDIDATURE
        ======================================== */

        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(20px) saturate(180%);
            z-index: 50000;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.7s cubic-bezier(0.4, 0, 0.2, 1), visibility 0.7s cubic-bezier(0.4, 0, 0.2, 1);
            padding: 2rem;
        }

        .modal-overlay.open {
            opacity: 1;
            visibility: visible;
        }

        .modal {
            background: var(--color-surface);
            border: 1px solid rgba(255, 255, 255, 0.07);
            max-width: 780px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            transform: translateY(60px) scale(0.97);
            transition: transform 0.7s cubic-bezier(0.4, 0, 0.2, 1);
            scrollbar-width: thin;
            scrollbar-color: rgba(255,255,255,0.1) transparent;
        }

        .modal::-webkit-scrollbar {
            width: 3px;
        }

        .modal::-webkit-scrollbar-track {
            background: transparent;
        }

        .modal::-webkit-scrollbar-thumb {
            background: rgba(255,255,255,0.1);
        }

        .modal-overlay.open .modal {
            transform: translateY(0) scale(1);
        }

        /* Progress bar */
        .modal-progress {
            position: sticky;
            top: 0;
            left: 0;
            width: 100%;
            height: 2px;
            background: rgba(255,255,255,0.04);
            z-index: 10;
        }

        .modal-progress-bar {
            height: 100%;
            background: linear-gradient(90deg, rgba(255,255,255,0.4), rgba(255,255,255,0.15));
            width: 0%;
            transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* Modal Header */
        .modal-header {
            padding: 4rem 5rem 3rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            position: relative;
        }

        .modal-close {
            position: absolute;
            top: 3.5rem;
            right: 4rem;
            background: none;
            border: none;
            color: var(--color-text-subtle);
            cursor: pointer;
            font-size: 0.7rem;
            letter-spacing: 0.2em;
            text-transform: uppercase;
            font-family: var(--font-body);
            font-weight: 300;
            transition: color 0.4s ease;
            padding: 0.5rem 0;
        }

        .modal-close:hover {
            color: var(--color-text);
        }

        .modal-step-indicator {
            font-size: 0.65rem;
            letter-spacing: 0.3em;
            color: var(--color-text-subtle);
            text-transform: uppercase;
            margin-bottom: 1.5rem;
            font-weight: 400;
        }

        .modal-title {
            font-family: var(--font-display);
            font-size: 2.6rem;
            font-weight: 300;
            letter-spacing: 0.1em;
            color: var(--color-text);
        }

        .modal-subtitle {
            margin-top: 0.8rem;
            font-size: 0.85rem;
            color: var(--color-text-muted);
            letter-spacing: 0.12em;
            font-weight: 300;
        }

        /* Steps */
        .modal-steps {
            overflow: hidden;
        }

        .form-step {
            display: none;
            padding: 4rem 5rem;
            animation: stepReveal 0.5s cubic-bezier(0.4, 0, 0.2, 1) forwards;
        }

        .form-step.active {
            display: block;
        }

        @keyframes stepReveal {
            from { opacity: 0; transform: translateX(30px); }
            to   { opacity: 1; transform: translateX(0); }
        }

        /* Form fields */
        .form-group {
            margin-bottom: 3rem;
        }

        .form-label {
            display: block;
            font-size: 0.68rem;
            letter-spacing: 0.25em;
            text-transform: uppercase;
            color: var(--color-text-muted);
            margin-bottom: 1rem;
            font-weight: 400;
        }

        .form-label span {
            color: rgba(255,255,255,0.25);
            font-size: 0.6rem;
            margin-left: 0.4rem;
            text-transform: none;
            letter-spacing: 0;
        }

        .form-input,
        .form-textarea,
        .form-select {
            width: 100%;
            background: rgba(255, 255, 255, 0.025);
            border: 1px solid rgba(255, 255, 255, 0.07);
            border-radius: 0;
            color: var(--color-text);
            font-family: var(--font-body);
            font-size: 0.95rem;
            font-weight: 300;
            padding: 1.2rem 1.6rem;
            outline: none;
            transition: border-color 0.5s cubic-bezier(0.4, 0, 0.2, 1), background 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            appearance: none;
            -webkit-appearance: none;
        }

        .form-input:focus,
        .form-textarea:focus,
        .form-select:focus {
            border-color: rgba(255, 255, 255, 0.22);
            background: rgba(255, 255, 255, 0.045);
        }

        .form-input::placeholder,
        .form-textarea::placeholder {
            color: var(--color-text-subtle);
            font-style: italic;
        }

        .form-textarea {
            resize: vertical;
            min-height: 130px;
            line-height: 1.8;
        }

        .form-select option {
            background: #111;
            color: #fff;
        }

        /* Select wrapper */
        .select-wrapper {
            position: relative;
        }

        .select-wrapper::after {
            content: '↓';
            position: absolute;
            right: 1.6rem;
            top: 50%;
            transform: translateY(-50%);
            color: var(--color-text-subtle);
            font-size: 0.8rem;
            pointer-events: none;
        }

        /* Radio / Checkbox groups */
        .radio-group,
        .checkbox-group {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .radio-option,
        .checkbox-option {
            display: flex;
            align-items: flex-start;
            gap: 1.2rem;
            cursor: pointer;
            padding: 1.2rem 1.6rem;
            border: 1px solid rgba(255,255,255,0.06);
            background: rgba(255,255,255,0.015);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .radio-option:hover,
        .checkbox-option:hover {
            border-color: rgba(255,255,255,0.14);
            background: rgba(255,255,255,0.03);
        }

        .radio-option input,
        .checkbox-option input {
            display: none;
        }

        .radio-custom,
        .checkbox-custom {
            width: 16px;
            height: 16px;
            border: 1px solid rgba(255,255,255,0.2);
            flex-shrink: 0;
            margin-top: 3px;
            position: relative;
            transition: all 0.3s ease;
        }

        .radio-custom { border-radius: 50%; }

        .radio-option input:checked ~ .radio-custom,
        .checkbox-option input:checked ~ .checkbox-custom {
            border-color: rgba(255,255,255,0.7);
            background: rgba(255,255,255,0.08);
        }

        .radio-option input:checked ~ .radio-custom::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 6px;
            height: 6px;
            background: white;
            border-radius: 50%;
        }

        .checkbox-option input:checked ~ .checkbox-custom::after {
            content: '✓';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 0.6rem;
            color: white;
        }

        .option-label {
            font-size: 0.9rem;
            font-weight: 300;
            color: var(--color-text-muted);
            line-height: 1.5;
        }

        .radio-option input:checked ~ .radio-custom + .option-label,
        .radio-option:has(input:checked) .option-label,
        .checkbox-option:has(input:checked) .option-label {
            color: var(--color-text);
        }

        /* Rating scale */
        .rating-scale {
            display: flex;
            gap: 0.6rem;
        }

        .rating-btn {
            flex: 1;
            padding: 0.9rem 0.2rem;
            background: rgba(255,255,255,0.02);
            border: 1px solid rgba(255,255,255,0.07);
            color: var(--color-text-subtle);
            font-family: var(--font-body);
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 300;
        }

        .rating-btn:hover {
            border-color: rgba(255,255,255,0.2);
            color: var(--color-text-muted);
        }

        .rating-btn.selected {
            border-color: rgba(255,255,255,0.4);
            background: rgba(255,255,255,0.06);
            color: var(--color-text);
        }

        .rating-labels {
            display: flex;
            justify-content: space-between;
            margin-top: 0.6rem;
        }

        .rating-labels span {
            font-size: 0.6rem;
            letter-spacing: 0.12em;
            color: var(--color-text-subtle);
            text-transform: uppercase;
        }

        /* Two-column grid */
        .form-grid-2 {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
        }

        /* Divider */
        .form-divider {
            border: none;
            border-top: 1px solid rgba(255,255,255,0.05);
            margin: 3rem 0;
        }

        /* Section sub-heading */
        .form-section-title {
            font-family: var(--font-display);
            font-size: 1.3rem;
            font-weight: 300;
            letter-spacing: 0.1em;
            color: var(--color-text);
            margin-bottom: 2rem;
        }

        /* Modal Footer / Navigation */
        .modal-footer {
            padding: 2.5rem 5rem 4rem;
            border-top: 1px solid rgba(255,255,255,0.05);
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            bottom: 0;
            background: var(--color-surface);
        }

        .btn-prev {
            background: none;
            border: none;
            color: var(--color-text-subtle);
            font-family: var(--font-body);
            font-size: 0.7rem;
            letter-spacing: 0.2em;
            text-transform: uppercase;
            cursor: pointer;
            font-weight: 300;
            transition: color 0.4s ease;
            padding: 0.5rem 0;
        }

        .btn-prev:hover { color: var(--color-text-muted); }
        .btn-prev:disabled { opacity: 0; pointer-events: none; }

        .btn-next {
            background: transparent;
            border: 1px solid rgba(255,255,255,0.18);
            color: var(--color-text);
            font-family: var(--font-body);
            font-size: 0.72rem;
            letter-spacing: 0.25em;
            text-transform: uppercase;
            cursor: pointer;
            font-weight: 300;
            padding: 1.1rem 3rem;
            transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .btn-next::before {
            content: '';
            position: absolute;
            top: 0; left: -100%;
            width: 100%; height: 100%;
            background: rgba(255,255,255,0.04);
            transition: left 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .btn-next:hover::before { left: 100%; }

        .btn-next:hover {
            border-color: rgba(255,255,255,0.4);
            transform: translateY(-2px);
        }

        /* Success Screen */
        .modal-success {
            display: none;
            padding: 7rem 5rem;
            text-align: center;
        }

        .modal-success.active {
            display: block;
            animation: stepReveal 0.6s cubic-bezier(0.4, 0, 0.2, 1) forwards;
        }

        .success-mark {
            width: 60px;
            height: 60px;
            border: 1px solid rgba(255,255,255,0.15);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 4rem;
            font-size: 1.4rem;
            color: rgba(255,255,255,0.5);
            animation: successPulse 3s ease-in-out infinite;
        }

        @keyframes successPulse {
            0%, 100% { box-shadow: 0 0 0 0 rgba(255,255,255,0.05); }
            50% { box-shadow: 0 0 0 20px rgba(255,255,255,0); }
        }

        .success-title {
            font-family: var(--font-display);
            font-size: 2.8rem;
            font-weight: 300;
            letter-spacing: 0.12em;
            margin-bottom: 2rem;
        }

        .success-text {
            font-size: 0.9rem;
            color: var(--color-text-muted);
            letter-spacing: 0.12em;
            line-height: 2;
            max-width: 420px;
            margin: 0 auto 4rem;
        }

        .success-ref {
            font-size: 0.65rem;
            color: var(--color-text-subtle);
            letter-spacing: 0.25em;
            text-transform: uppercase;
        }

        /* Analyzing state */
        .analyzing-spinner {
            width: 40px;
            height: 40px;
            border: 1px solid rgba(255,255,255,0.08);
            border-top-color: rgba(255,255,255,0.4);
            border-radius: 50%;
            margin: 0 auto 2.5rem;
            animation: spin 1.2s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .analyzing-text {
            font-size: 0.8rem;
            letter-spacing: 0.2em;
            color: var(--color-text-muted);
            text-transform: uppercase;
        }

        .analyzing-dots::after {
            content: '';
            animation: dots 1.5s steps(4, end) infinite;
        }

        @keyframes dots {
            0%   { content: ''; }
            25%  { content: '.'; }
            50%  { content: '..'; }
            75%  { content: '...'; }
            100% { content: ''; }
        }

        /* Responsive modal */
        @media (max-width: 768px) {
            .modal-header,
            .form-step,
            .modal-footer {
                padding-left: 2.5rem;
                padding-right: 2.5rem;
            }

            .modal-close {
                right: 2.5rem;
            }

            .modal-title {
                font-size: 2rem;
                padding-right: 4rem;
            }

            .form-grid-2 {
                grid-template-columns: 1fr;
            }

            .modal-footer {
                padding-bottom: 3rem;
            }

            .rating-scale {
                gap: 0.4rem;
            }
        }
    </style>
</head>
<body class="loading">
    <!-- Page Loader -->
    <div class="page-loader">
        <div class="loader-content">
            <div class="loader-logo">BURTON</div>
            <div class="loader-line"></div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="main-content">
    <!-- Navigation -->
    <nav id="navbar">
        <a href="#" class="logo">BURTON</a>
        <ul class="nav-links">
            <li><a href="#vision">Vision</a></li>
            <li><a href="#progression">Progression</a></li>
            <li><a href="#selection">Sélection</a></li>
            <li><a href="#rejoindre">Rejoindre</a></li>
            <li><a href="#" id="branchesNavLink">Branches</a></li>
            <li><a href="#" id="adminNavLink" style="color:rgba(255,255,255,0.12);font-size:0.6rem;letter-spacing:0.3em;" title="Espace interne">&#9670;</a></li>
        </ul>
    </nav>

    <!-- Hero Section -->
    <section class="hero" id="hero">
        <div class="hero-content">
            <h1>BURTON CORPORATION</h1>
            <p class="hero-tagline">Construire. Progresser. Réussir.</p>
        </div>
        <div class="scroll-indicator">
            <div class="scroll-line"></div>
        </div>
    </section>

    <!-- Introduction -->
    <section class="intro" id="intro">
        <div class="container">
            <span class="section-number reveal-element">01 — Introduction</span>
            <div class="intro-content reveal-element">
                <p>Burton Corporation n'est pas une entreprise traditionnelle. C'est une structure fondée sur l'idée que la réussite durable naît de la progression réelle des individus.</p>
            </div>
        </div>
    </section>

    <!-- Vision -->
    <section class="vision" id="vision">
        <div class="container">
            <span class="section-number reveal-element">02 — Vision</span>
            <div class="section-title reveal-element">
                <h2>Nos Piliers</h2>
            </div>
            <div class="vision-grid">
                <div class="vision-card">
                    <h3>Réussite</h3>
                    <p>Atteindre des résultats concrets, mesurables et durables. La réussite chez Burton Corporation n'est pas une notion abstraite, c'est une exigence quotidienne fondée sur l'excellence et la performance.</p>
                </div>
                <div class="vision-card">
                    <h3>Progrès</h3>
                    <p>Évoluer en permanence, individuellement et collectivement. Le progrès est le moteur de toute organisation qui aspire à l'excellence. Nous cultivons une culture de l'amélioration continue et de l'innovation.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Progression -->
    <section class="progression" id="progression">
        <div class="container">
            <span class="section-number reveal-element">03 — Progression</span>
            <div class="section-title reveal-element">
                <h2>Parcours Interne</h2>
                <p class="subtitle">Une trajectoire définie par le mérite</p>
            </div>
            <div class="progression-timeline">
                <div class="progression-step">
                    <h4>Stagiaire</h4>
                    <p>Point d'entrée initial, période d'observation et d'apprentissage des fondamentaux de l'organisation.</p>
                </div>
                <div class="progression-step">
                    <h4>Employé</h4>
                    <p>Intégration complète aux équipes opérationnelles avec responsabilités définies et objectifs mesurables.</p>
                </div>
                <div class="progression-step">
                    <h4>Employé Installé</h4>
                    <p>Expertise confirmée, autonomie complète et contribution significative aux projets stratégiques.</p>
                </div>
                <div class="progression-step">
                    <h4>Co-directeur</h4>
                    <p>Leadership partagé sur des départements clés, participation aux décisions stratégiques majeures.</p>
                </div>
                <div class="progression-step">
                    <h4>Directeur</h4>
                    <p>Responsabilité totale d'un département, vision stratégique et influence directe sur l'avenir de l'organisation.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Sélection -->
    <section class="selection" id="selection">
        <div class="container">
            <span class="section-number reveal-element">04 — Sélection</span>
            <div class="section-title reveal-element">
                <h2>Excellence par la Sélectivité</h2>
            </div>
            <div class="selection-stats">
                <div class="stat">
                    <span class="stat-number">10 000+</span>
                    <span class="stat-label">Candidatures par an</span>
                </div>
                <div class="stat">
                    <span class="stat-number">24</span>
                    <span class="stat-label">Candidats retenus</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Procédure -->
    <section class="procedure" id="procedure">
        <div class="container">
            <span class="section-number reveal-element">05 — Procédure</span>
            <div class="section-title reveal-element">
                <h2>Processus de Sélection</h2>
                <p class="subtitle">Trois étapes vers l'excellence</p>
            </div>
            <div class="procedure-steps">
                <div class="procedure-step">
                    <div class="step-number">01</div>
                    <h4>Questionnaire de Sélection</h4>
                    <p>Évaluation initiale des compétences, motivations et alignement avec les valeurs de Burton Corporation.</p>
                </div>
                <div class="procedure-step">
                    <div class="step-number">02</div>
                    <h4>Entretien avec le Fondateur</h4>
                    <p>Discussion approfondie pour comprendre votre vision, vos ambitions et votre potentiel de progression.</p>
                </div>
                <div class="procedure-step">
                    <div class="step-number">03</div>
                    <h4>Décision Finale</h4>
                    <p>La direction collégiale examine votre candidature et prend la décision d'intégration définitive.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- CTA -->
    <section class="cta" id="rejoindre">
        <div class="container">
            <div class="cta-content reveal-element">
                <h2>Rejoindre Burton Corporation</h2>
                <button class="cta-button" id="openApplication">Commencer la Candidature</button>
                <p class="cta-disclaimer">Les candidatures sont examinées sur une base mensuelle</p>
            </div>
        </div>
    </section>
    </div><!-- Fin main-content -->

    <!-- ========================================
         MODAL CANDIDATURE
    ======================================== -->
    <div class="modal-overlay" id="applicationModal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
        <div class="modal">

            <!-- Progress bar -->
            <div class="modal-progress">
                <div class="modal-progress-bar" id="progressBar"></div>
            </div>

            <!-- Header -->
            <div class="modal-header">
                <button class="modal-close" id="closeModal">Fermer &times;</button>
                <div class="modal-step-indicator" id="stepIndicator">Étape 1 sur 4</div>
                <h2 class="modal-title" id="modalTitle">Informations Personnelles</h2>
                <p class="modal-subtitle" id="modalSubtitle">Renseignez vos coordonnées pour débuter votre dossier de candidature.</p>
            </div>

            <!-- ÉTAPE 1 — Identité -->
            <div class="form-step active" id="step-1">
                <div class="form-grid-2">
                    <div class="form-group">
                        <label class="form-label" for="f-prenom">Prénom <span>*</span></label>
                        <input class="form-input" type="text" id="f-prenom" placeholder="Votre prénom" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="f-nom">Nom <span>*</span></label>
                        <input class="form-input" type="text" id="f-nom" placeholder="Votre nom de famille" required>
                    </div>
                </div>
                <div class="form-grid-2">
                    <div class="form-group">
                        <label class="form-label" for="f-age">Âge <span>*</span></label>
                        <input class="form-input" type="number" id="f-age" placeholder="18" min="16" max="80" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="f-nationalite">Nationalité <span>*</span></label>
                        <div class="select-wrapper">
                            <select class="form-select" id="f-nationalite" required>
                                <option value="" disabled selected>Sélectionnez votre nationalité</option>
                                <option value="fr">Française</option>
                                <option value="be">Belge</option>
                                <option value="ch">Suisse</option>
                                <option value="ca">Canadienne</option>
                                <option value="lu">Luxembourgeoise</option>
                                <option value="ma">Marocaine</option>
                                <option value="dz">Algérienne</option>
                                <option value="tn">Tunisienne</option>
                                <option value="sn">Sénégalaise</option>
                                <option value="ci">Ivoirienne</option>
                                <option value="cm">Camerounaise</option>
                                <option value="ml">Malienne</option>
                                <option value="gn">Guinéenne</option>
                                <option value="cd">Congolaise (RDC)</option>
                                <option value="ga">Gabonaise</option>
                                <option value="de">Allemande</option>
                                <option value="es">Espagnole</option>
                                <option value="it">Italienne</option>
                                <option value="pt">Portugaise</option>
                                <option value="nl">Néerlandaise</option>
                                <option value="gb">Britannique</option>
                                <option value="pl">Polonaise</option>
                                <option value="ro">Roumaine</option>
                                <option value="us">Américaine</option>
                                <option value="br">Brésilienne</option>
                                <option value="other">Autre</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label" for="f-email">Adresse e-mail <span>*</span></label>
                    <input class="form-input" type="email" id="f-email" placeholder="votre@email.com" required>
                </div>
                <div class="form-group">
                    <label class="form-label" for="f-disponibilite">Disponibilité hebdomadaire <span>*</span></label>
                    <div class="select-wrapper">
                        <select class="form-select" id="f-disponibilite" required>
                            <option value="" disabled selected>Sélectionnez une plage</option>
                            <option value="<5">Moins de 5 heures / semaine</option>
                            <option value="5-10">5 à 10 heures / semaine</option>
                            <option value="10-20">10 à 20 heures / semaine</option>
                            <option value=">20">Plus de 20 heures / semaine</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- ÉTAPE 2 — Motivation & Valeurs -->
            <div class="form-step" id="step-2">
                <p class="form-section-title">Motivation &amp; Alignement</p>
                <div class="form-group">
                    <label class="form-label" for="f-motivation">Pourquoi souhaitez-vous rejoindre Burton Corporation ? <span>*</span></label>
                    <textarea class="form-textarea" id="f-motivation" placeholder="Exprimez de façon sincère et précise ce qui vous attire dans notre structure..." required style="min-height:160px;"></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label">Quelle valeur vous correspond le mieux ? <span>*</span></label>
                    <div class="radio-group">
                        <label class="radio-option">
                            <input type="radio" name="valeur" value="reussite">
                            <span class="radio-custom"></span>
                            <span class="option-label"><strong>Réussite</strong> — Atteindre des résultats concrets et mesurables</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="valeur" value="progres">
                            <span class="radio-custom"></span>
                            <span class="option-label"><strong>Progrès</strong> — Évoluer sans cesse, individuellement et collectivement</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="valeur" value="excellence">
                            <span class="radio-custom"></span>
                            <span class="option-label"><strong>Excellence</strong> — Faire chaque chose avec le plus haut niveau d'exigence</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="valeur" value="loyaute">
                            <span class="radio-custom"></span>
                            <span class="option-label"><strong>Loyauté</strong> — S'engager pleinement envers une organisation et ses membres</span>
                        </label>
                    </div>
                </div>
                <hr class="form-divider">
                <div class="form-group">
                    <label class="form-label" for="f-apport">Quelle compétence ou valeur ajoutée apporteriez-vous ? <span>*</span></label>
                    <textarea class="form-textarea" id="f-apport" placeholder="Décrivez concrètement ce que vous pouvez apporter à notre organisation..." required></textarea>
                </div>
            </div>

            <!-- ÉTAPE 3 — Expérience & Aptitudes -->
            <div class="form-step" id="step-3">
                <p class="form-section-title">Expérience &amp; Aptitudes</p>
                <div class="form-group">
                    <label class="form-label" for="f-experience">Avez-vous déjà travaillé au sein d'une organisation similaire ? <span>*</span></label>
                    <div class="select-wrapper">
                        <select class="form-select" id="f-experience" required>
                            <option value="" disabled selected>Sélectionnez une réponse</option>
                            <option value="aucune">Non, aucune expérience préalable</option>
                            <option value="peu">Oui, brièvement (moins de 3 mois)</option>
                            <option value="moderee">Oui, pendant plusieurs mois</option>
                            <option value="avancee">Oui, j'ai occupé un poste de responsabilité</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label" for="f-detail-exp">Si oui, décrivez brièvement votre rôle et vos réalisations</label>
                    <textarea class="form-textarea" id="f-detail-exp" placeholder="Laissez vide si sans expérience préalable..."></textarea>
                </div>
                <hr class="form-divider">
                <div class="form-group">
                    <label class="form-label">Évaluez votre capacité à travailler en équipe</label>
                    <div class="rating-scale" id="rating-equipe"></div>
                    <div class="rating-labels">
                        <span>Solitaire</span>
                        <span>Très collaboratif</span>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">Évaluez votre capacité à gérer la pression</label>
                    <div class="rating-scale" id="rating-pression"></div>
                    <div class="rating-labels">
                        <span>Sensible</span>
                        <span>Très résistant</span>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">Compétences que vous maîtrisez</label>
                    <div class="checkbox-group">
                        <label class="checkbox-option">
                            <input type="checkbox" name="competence" value="communication">
                            <span class="checkbox-custom"></span>
                            <span class="option-label">Communication &amp; Diplomatie</span>
                        </label>
                        <label class="checkbox-option">
                            <input type="checkbox" name="competence" value="gestion">
                            <span class="checkbox-custom"></span>
                            <span class="option-label">Gestion de projet &amp; Organisation</span>
                        </label>
                        <label class="checkbox-option">
                            <input type="checkbox" name="competence" value="leadership">
                            <span class="checkbox-custom"></span>
                            <span class="option-label">Leadership &amp; Management d'équipe</span>
                        </label>
                        <label class="checkbox-option">
                            <input type="checkbox" name="competence" value="analyse">
                            <span class="checkbox-custom"></span>
                            <span class="option-label">Analyse &amp; Prise de décision stratégique</span>
                        </label>
                        <label class="checkbox-option">
                            <input type="checkbox" name="competence" value="negociation">
                            <span class="checkbox-custom"></span>
                            <span class="option-label">Négociation &amp; Persuasion</span>
                        </label>
                    </div>
                </div>
            </div>

            <!-- ÉTAPE 4 — Engagement & Finalisation -->
            <div class="form-step" id="step-4">
                <p class="form-section-title">Engagement &amp; Finalisation</p>
                <div class="form-group">
                    <label class="form-label" for="f-objectif">Quel objectif souhaitez-vous atteindre dans les 6 prochains mois ? <span>*</span></label>
                    <textarea class="form-textarea" id="f-objectif" placeholder="Soyez précis et ambitieux dans votre réponse..." required style="min-height:150px;"></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label" for="f-defi">Décrivez un défi que vous avez surmonté et ce que vous en avez retenu <span>*</span></label>
                    <textarea class="form-textarea" id="f-defi" placeholder="Choisissez un exemple révélateur de votre caractère..." required style="min-height:150px;"></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label" for="f-comment">Comment avez-vous entendu parler de Burton Corporation ?</label>
                    <div class="select-wrapper">
                        <select class="form-select" id="f-comment">
                            <option value="" disabled selected>Sélectionnez une source</option>
                            <option value="bouche">Bouche-à-oreille / Recommandation</option>
                            <option value="reseaux">Réseaux sociaux</option>
                            <option value="discord">Serveurs Discord</option>
                            <option value="autre">Autre</option>
                        </select>
                    </div>
                </div>
                <hr class="form-divider">
                <div class="form-group">
                    <label class="form-label">Engagements <span>*</span></label>
                    <div class="checkbox-group">
                        <label class="checkbox-option" id="check-regles">
                            <input type="checkbox" name="engagement" value="regles" id="cb-regles" required>
                            <span class="checkbox-custom"></span>
                            <span class="option-label">Je m'engage à respecter les règles internes de Burton Corporation en tout temps.</span>
                        </label>
                        <label class="checkbox-option" id="check-sincere">
                            <input type="checkbox" name="engagement" value="sincere" id="cb-sincere" required>
                            <span class="checkbox-custom"></span>
                            <span class="option-label">Je certifie que les informations fournies sont sincères et exactes.</span>
                        </label>
                        <label class="checkbox-option" id="check-dispo">
                            <input type="checkbox" name="engagement" value="dispo" id="cb-dispo" required>
                            <span class="checkbox-custom"></span>
                            <span class="option-label">Je comprends que ma candidature sera examinée dans un délai d'un mois calendaire.</span>
                        </label>
                    </div>
                </div>
            </div>

            <!-- Success Screen -->
            <div class="modal-success" id="modal-success">
                <!-- Analyzing state -->
                <div id="success-analyzing" style="display:none; text-align:center; padding: 4rem 0;">
                    <div class="analyzing-spinner"></div>
                    <p class="analyzing-text">Analyse de votre candidature en cours<span class="analyzing-dots"></span></p>
                    <p style="font-size:0.65rem;letter-spacing:0.2em;color:var(--color-text-subtle);margin-top:1rem;text-transform:uppercase;">Veuillez patienter</p>
                </div>
                <!-- Final success state -->
                <div id="success-final" style="display:none;">
                    <div class="success-mark">✦</div>
                    <h2 class="success-title">Candidature Transmise</h2>
                    <p class="success-text">Votre dossier a bien été reçu par Burton Corporation. Il sera examiné lors de notre prochaine session mensuelle de sélection.</p>
                    <p class="success-ref" id="success-ref">Référence — —</p>
                </div>
            </div>

            <!-- Footer Navigation -->
            <div class="modal-footer" id="modal-footer">
                <button class="btn-prev" id="btnPrev" disabled>← Précédent</button>
                <button class="btn-next" id="btnNext">Continuer →</button>
            </div>

        </div>
    </div>

    <script>
        // Page loader
        window.addEventListener('load', () => {
            setTimeout(() => {
                const loader = document.querySelector('.page-loader');
                const body = document.body;
                
                loader.classList.add('hidden');
                body.classList.remove('loading');
                
                setTimeout(() => {
                    loader.style.display = 'none';
                }, 1500);
            }, 2000);
        });

        // Navigation background on scroll
        const navbar = document.getElementById('navbar');
        
        window.addEventListener('scroll', () => {
            if (window.scrollY > 100) {
                navbar.classList.add('scrolled');
            } else {
                navbar.classList.remove('scrolled');
            }
        });

        // Smooth scroll reveal with Intersection Observer
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -120px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('reveal');
                }
            });
        }, observerOptions);

        // Observe all elements with reveal classes
        document.querySelectorAll('.reveal-element, .vision-card, .progression-step, .stat, .procedure-step').forEach(el => {
            observer.observe(el);
        });

        // Smooth scroll for navigation links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Staggered reveal for progression steps
        const progressionSteps = document.querySelectorAll('.progression-step');
        progressionSteps.forEach((step, index) => {
            step.style.transitionDelay = `${index * 0.2}s`;
        });

        // Staggered reveal for procedure steps
        const procedureSteps = document.querySelectorAll('.procedure-step');
        procedureSteps.forEach((step, index) => {
            step.style.transitionDelay = `${index * 0.25}s`;
        });

        // Staggered reveal for vision cards
        const visionCards = document.querySelectorAll('.vision-card');
        visionCards.forEach((card, index) => {
            card.style.transitionDelay = `${index * 0.3}s`;
        });

        // Staggered reveal for stats
        const stats = document.querySelectorAll('.stat');
        stats.forEach((stat, index) => {
            stat.style.transitionDelay = `${index * 0.4}s`;
        });

        // Enhanced parallax effect for hero
        let ticking = false;
        
        window.addEventListener('scroll', () => {
            if (!ticking) {
                window.requestAnimationFrame(() => {
                    const scrolled = window.pageYOffset;
                    const hero = document.querySelector('.hero-content');
                    
                    if (hero && scrolled < window.innerHeight) {
                        hero.style.transform = `translateY(${scrolled * 0.5}px)`;
                        hero.style.opacity = Math.max(0, 1 - (scrolled / window.innerHeight) * 1.2);
                    }
                    
                    ticking = false;
                });
                
                ticking = true;
            }
        });

        // Subtle section background transitions
        const sections = document.querySelectorAll('section');
        const sectionObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.opacity = '1';
                }
            });
        }, {
            threshold: 0.2
        });

        sections.forEach(section => {
            sectionObserver.observe(section);
        });

        // ========================================
        // MODAL CANDIDATURE — Logic
        // ========================================

        const TOTAL_STEPS = 4;
        let currentStep = 1;

        const modal       = document.getElementById('applicationModal');
        const openBtn     = document.getElementById('openApplication');
        const closeBtn    = document.getElementById('closeModal');
        const btnNext     = document.getElementById('btnNext');
        const btnPrev     = document.getElementById('btnPrev');
        const progressBar = document.getElementById('progressBar');
        const stepIndicator = document.getElementById('stepIndicator');
        const modalTitle    = document.getElementById('modalTitle');
        const modalSubtitle = document.getElementById('modalSubtitle');
        const modalFooter   = document.getElementById('modal-footer');
        const successScreen = document.getElementById('modal-success');

        const stepMeta = [
            {
                title: 'Informations Personnelles',
                subtitle: 'Renseignez vos coordonnées pour débuter votre dossier de candidature.'
            },
            {
                title: 'Motivation & Valeurs',
                subtitle: 'Exprimez ce qui vous anime et votre adéquation avec notre culture.'
            },
            {
                title: 'Expérience & Aptitudes',
                subtitle: 'Évaluez vos compétences et décrivez votre parcours professionnel.'
            },
            {
                title: 'Engagement & Finalisation',
                subtitle: 'Définissez vos ambitions et confirmez vos engagements avant envoi.'
            }
        ];

        // Build rating scales
        function buildRatingScale(containerId) {
            const container = document.getElementById(containerId);
            if (!container) return;
            for (let i = 1; i <= 10; i++) {
                const btn = document.createElement('button');
                btn.type = 'button';
                btn.classList.add('rating-btn');
                btn.textContent = i;
                btn.dataset.value = i;
                btn.addEventListener('click', () => {
                    container.querySelectorAll('.rating-btn').forEach(b => b.classList.remove('selected'));
                    btn.classList.add('selected');
                });
                container.appendChild(btn);
            }
        }

        buildRatingScale('rating-equipe');
        buildRatingScale('rating-pression');

        // Open / close
        function openModal() {
            modal.classList.add('open');
            document.body.style.overflow = 'hidden';
            goToStep(1);
        }

        function closeModal() {
            modal.classList.remove('open');
            document.body.style.overflow = '';
        }

        openBtn.addEventListener('click', openModal);
        closeBtn.addEventListener('click', closeModal);

        modal.addEventListener('click', (e) => {
            if (e.target === modal) closeModal();
        });

        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && modal.classList.contains('open')) closeModal();
        });

        // Navigate
        function goToStep(n) {
            // Hide all steps
            document.querySelectorAll('.form-step').forEach(s => s.classList.remove('active'));
            successScreen.classList.remove('active');

            currentStep = n;

            if (n <= TOTAL_STEPS) {
                const step = document.getElementById(`step-${n}`);
                if (step) step.classList.add('active');

                stepIndicator.textContent  = `Étape ${n} sur ${TOTAL_STEPS}`;
                modalTitle.textContent     = stepMeta[n - 1].title;
                modalSubtitle.textContent  = stepMeta[n - 1].subtitle;

                // Progress
                progressBar.style.width = `${((n - 1) / TOTAL_STEPS) * 100}%`;

                // Buttons
                document.getElementById('btnPrev').disabled = (n === 1);
                document.getElementById('btnNext').textContent = (n === TOTAL_STEPS) ? 'Soumettre ma candidature →' : 'Continuer →';
                modalFooter.style.display = 'flex';
            } else {
                // Show analyzing state — async submitApplication will reveal final screen
                progressBar.style.width = '100%';
                successScreen.classList.add('active');
                modalFooter.style.display = 'none';
                stepIndicator.textContent = 'Analyse en cours…';
                modalTitle.textContent    = '';
                modalSubtitle.textContent = '';
                document.getElementById('success-analyzing').style.display = 'block';
                document.getElementById('success-final').style.display     = 'none';
            }

            // Scroll modal to top
            const modalEl = modal.querySelector('.modal');
            if (modalEl) modalEl.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // btnNext & btnPrev listeners are handled by the admin script below (patchSubmit)
        // to intercept form submission before advancing to the success screen.

        // Basic validation per step
        function validateStep(n) {
            const step = document.getElementById(`step-${n}`);
            if (!step) return true;

            let valid = true;

            // Check required text / select / textarea
            step.querySelectorAll('[required]').forEach(field => {
                field.style.borderColor = '';
                if (!field.value.trim()) {
                    field.style.borderColor = 'rgba(255,80,80,0.4)';
                    valid = false;
                }
            });

            // Check required radio groups
            if (n === 2) {
                const radioVal = document.querySelector('input[name="valeur"]:checked');
                if (!radioVal) {
                    valid = false;
                    const radios = step.querySelectorAll('.radio-option');
                    radios.forEach(r => r.style.borderColor = 'rgba(255,80,80,0.3)');
                    setTimeout(() => radios.forEach(r => r.style.borderColor = ''), 2000);
                }
            }

            // Check required checkboxes on step 4
            if (n === 4) {
                ['cb-regles', 'cb-sincere', 'cb-dispo'].forEach(id => {
                    const cb = document.getElementById(id);
                    if (cb && !cb.checked) {
                        valid = false;
                        const wrapper = cb.closest('.checkbox-option');
                        if (wrapper) {
                            wrapper.style.borderColor = 'rgba(255,80,80,0.3)';
                            setTimeout(() => wrapper.style.borderColor = '', 2000);
                        }
                    }
                });
            }

            if (!valid) {
                // Gentle shake feedback
                const modalEl = modal.querySelector('.modal');
                modalEl.style.animation = 'none';
                modalEl.style.transform = 'translateX(-8px)';
                setTimeout(() => {
                    modalEl.style.transition = 'transform 0.4s cubic-bezier(0.4,0,0.2,1)';
                    modalEl.style.transform = '';
                }, 100);
            }

            return valid;
        }
    </script>

    <!-- ========================================
         BRANCHES OVERLAY
    ======================================== -->
    <div class="branches-overlay" id="branchesOverlay">

        <div class="branches-header">
            <div class="branches-header-left">
                <span class="branches-logo">BURTON</span>
                <span class="branches-title">Nos Branches</span>
            </div>
            <button class="branches-close" id="branchesClose">Fermer ×</button>
        </div>

        <!-- Tabs -->
        <div class="branches-tabs">
            <button class="branch-tab active" data-branch="watch">Watch</button>
            <button class="branch-tab" data-branch="parfum">Parfum</button>
            <button class="branch-tab" data-branch="clothes">Clothes</button>
            <button class="branch-tab" data-branch="chocolate">Chocolate</button>
            <button class="branch-tab" data-branch="production">Production</button>
        </div>

        <div class="branches-content">

            <!-- WATCH -->
            <div class="branch-panel active" id="branch-watch">
                <div class="branch-hero">
                    <div class="branch-hero-gradient" style="background: linear-gradient(135deg, rgba(180,160,100,0.04) 0%, transparent 60%), linear-gradient(to top, #080808 30%, transparent 100%);"></div>
                    <div class="branch-hero-content">
                        <div class="branch-eyebrow">Burton — Division Horlogerie</div>
                        <div class="branch-name">Watch</div>
                        <div class="branch-tagline">Le temps, maîtrisé. Chaque seconde, une affirmation de caractère.</div>
                    </div>
                </div>
                <div class="branch-body">
                    <div class="branch-desc">
                        Burton Watch incarne l'alliance entre mécanique de précision et esthétique radicale. Nos pièces ne se portent pas — elles se méritent. Chaque montre est conçue comme un manifeste silencieux de l'ambition de celui qui la porte.
                    </div>
                    <div class="branch-details">
                        <div class="branch-detail-row"><span class="branch-detail-key">Fondée</span><span class="branch-detail-val">Division inaugurée en seconde année d'existence de Burton Corp.</span></div>
                        <div class="branch-detail-row"><span class="branch-detail-key">Positionnement</span><span class="branch-detail-val">Ultra-premium — production limitée à 50 pièces par collection</span></div>
                        <div class="branch-detail-row"><span class="branch-detail-key">Matériaux</span><span class="branch-detail-val">Titane grade 5, saphir, acier 316L traité PVD noir</span></div>
                        <div class="branch-detail-row"><span class="branch-detail-key">Distribution</span><span class="branch-detail-val">Exclusive — réservée aux membres Burton Corporation</span></div>
                    </div>
                </div>
                <div class="branch-products" style="max-width:1300px;margin:0 auto;">
                    <div class="branch-products-title">Collections</div>
                    <div class="branch-products-grid">
                        <div class="branch-product-card"><div class="product-num">01</div><div class="product-name">Noir Absolu</div><div class="product-desc">Cadran onyx, mouvement squelette. L'obscurité comme philosophie. Édition de 12 pièces.</div></div>
                        <div class="branch-product-card"><div class="product-num">02</div><div class="product-name">Meridian</div><div class="product-desc">Complication GMT double fuseau. Pour ceux dont l'ambition ne connaît pas de fuseau horaire.</div></div>
                        <div class="branch-product-card"><div class="product-num">03</div><div class="product-name">Founder's Edition</div><div class="product-desc">Réservée aux directeurs Burton. Numérotée, gravée, intransmissible. La réussite, au poignet.</div></div>
                    </div>
                </div>
            </div>

            <!-- PARFUM -->
            <div class="branch-panel" id="branch-parfum">
                <div class="branch-hero">
                    <div class="branch-hero-gradient" style="background: linear-gradient(135deg, rgba(160,120,180,0.04) 0%, transparent 60%), linear-gradient(to top, #080808 30%, transparent 100%);"></div>
                    <div class="branch-hero-content">
                        <div class="branch-eyebrow">Burton — Division Olfactive</div>
                        <div class="branch-name">Parfum</div>
                        <div class="branch-tagline">Une présence que l'on ressent avant même de vous voir.</div>
                    </div>
                </div>
                <div class="branch-body">
                    <div class="branch-desc">
                        Burton Parfum est né d'une conviction : le parfum est le seul accessoire que vous laissez dans chaque pièce après votre départ. Nos compositions olfactives sont des déclarations d'intention — jamais conventionnelles, toujours mémorables.
                    </div>
                    <div class="branch-details">
                        <div class="branch-detail-row"><span class="branch-detail-key">Philosophie</span><span class="branch-detail-val">Niche absolue — aucune note commune avec le marché de masse</span></div>
                        <div class="branch-detail-row"><span class="branch-detail-key">Nez</span><span class="branch-detail-val">Compositions élaborées par un maître parfumeur indépendant</span></div>
                        <div class="branch-detail-row"><span class="branch-detail-key">Format</span><span class="branch-detail-val">Flacons 50ml numérotés, bouchon laqué noir mat</span></div>
                        <div class="branch-detail-row"><span class="branch-detail-key">Tirage</span><span class="branch-detail-val">100 flacons maximum par fragrance — sans réassort</span></div>
                    </div>
                </div>
                <div class="branch-products" style="max-width:1300px;margin:0 auto;">
                    <div class="branch-products-title">Fragrances</div>
                    <div class="branch-products-grid">
                        <div class="branch-product-card"><div class="product-num">01</div><div class="product-name">Cendre</div><div class="product-desc">Bois brûlé, vétiver fumé, musc blanc. Ce qui reste après que tout a été consumé.</div></div>
                        <div class="branch-product-card"><div class="product-num">02</div><div class="product-name">Ambition</div><div class="product-desc">Poivre noir, cuir tanné, ambre chaud. La fragrance des décisions difficiles et des victoires silencieuses.</div></div>
                        <div class="branch-product-card"><div class="product-num">03</div><div class="product-name">Protocole</div><div class="product-desc">Cèdre de l'Atlas, iris, encens. Pour les salles de réunion où l'on ne parle qu'une fois.</div></div>
                    </div>
                </div>
            </div>

            <!-- CLOTHES -->
            <div class="branch-panel" id="branch-clothes">
                <div class="branch-hero">
                    <div class="branch-hero-gradient" style="background: linear-gradient(135deg, rgba(100,140,180,0.04) 0%, transparent 60%), linear-gradient(to top, #080808 30%, transparent 100%);"></div>
                    <div class="branch-hero-content">
                        <div class="branch-eyebrow">Burton — Division Vestimentaire</div>
                        <div class="branch-name">Clothes</div>
                        <div class="branch-tagline">L'uniforme de ceux qui n'ont pas besoin de se justifier.</div>
                    </div>
                </div>
                <div class="branch-body">
                    <div class="branch-desc">
                        Burton Clothes rejette l'éphémère. Chaque pièce est conçue pour durer une décennie et traverser les saisons sans vieillir. Coupe architecturale, matières nobles, absence totale de logo visible. L'élégance n'a pas besoin de signature.
                    </div>
                    <div class="branch-details">
                        <div class="branch-detail-row"><span class="branch-detail-key">Esthétique</span><span class="branch-detail-val">Minimalisme radical — palette monochrome noir, anthracite, ivoire</span></div>
                        <div class="branch-detail-row"><span class="branch-detail-key">Matières</span><span class="branch-detail-val">Laine mérinos, cachemire double face, lin technique japonais</span></div>
                        <div class="branch-detail-row"><span class="branch-detail-key">Production</span><span class="branch-detail-val">Ateliers européens certifiés, confection à la pièce</span></div>
                        <div class="branch-detail-row"><span class="branch-detail-key">Accès</span><span class="branch-detail-val">Sur commande — délai de 6 à 8 semaines</span></div>
                    </div>
                </div>
                <div class="branch-products" style="max-width:1300px;margin:0 auto;">
                    <div class="branch-products-title">Pièces Signature</div>
                    <div class="branch-products-grid">
                        <div class="branch-product-card"><div class="product-num">01</div><div class="product-name">Le Manteau</div><div class="product-desc">Laine bouillie noire, coupe droite oversize. La pièce fondatrice de la collection. Une seule version, pour toujours.</div></div>
                        <div class="branch-product-card"><div class="product-num">02</div><div class="product-name">Chemise Architecte</div><div class="product-desc">Col officier, lin technique froissé à froid. Pour ceux qui construisent sans faire de bruit.</div></div>
                        <div class="branch-product-card"><div class="product-num">03</div><div class="product-name">Ensemble Directeur</div><div class="product-desc">Veste et pantalon cachemire anthracite. Réservé aux membres de rang Co-directeur et au-delà.</div></div>
                    </div>
                </div>
            </div>

            <!-- CHOCOLATE -->
            <div class="branch-panel" id="branch-chocolate">
                <div class="branch-hero">
                    <div class="branch-hero-gradient" style="background: linear-gradient(135deg, rgba(140,90,50,0.05) 0%, transparent 60%), linear-gradient(to top, #080808 30%, transparent 100%);"></div>
                    <div class="branch-hero-content">
                        <div class="branch-eyebrow">Burton — Division Gastronomique</div>
                        <div class="branch-name">Chocolate</div>
                        <div class="branch-tagline">Le luxe qui se consomme. La perfection, éphémère par design.</div>
                    </div>
                </div>
                <div class="branch-body">
                    <div class="branch-desc">
                        Burton Chocolate explore le paradoxe du luxe consommable — créer quelque chose d'irremplaçable destiné à disparaître. Nos tablettes et confections sont élaborées à partir de cacao grand cru, source unique, récolte manuelle. Une division aussi sérieuse que les autres.
                    </div>
                    <div class="branch-details">
                        <div class="branch-detail-row"><span class="branch-detail-key">Origines</span><span class="branch-detail-val">Cacao Criollo — Venezuela, Madagascar, São Tomé</span></div>
                        <div class="branch-detail-row"><span class="branch-detail-key">Process</span><span class="branch-detail-val">Bean-to-bar intégral, torréfaction à la pièce</span></div>
                        <div class="branch-detail-row"><span class="branch-detail-key">Teneur</span><span class="branch-detail-val">72% minimum — aucun ajout de vanilline de synthèse</span></div>
                        <div class="branch-detail-row"><span class="branch-detail-key">Packaging</span><span class="branch-detail-val">Papier japonais noir gaufré, scellé à la cire Burton</span></div>
                    </div>
                </div>
                <div class="branch-products" style="max-width:1300px;margin:0 auto;">
                    <div class="branch-products-title">Créations</div>
                    <div class="branch-products-grid">
                        <div class="branch-product-card"><div class="product-num">01</div><div class="product-name">Origine Noir</div><div class="product-desc">85% Criollo vénézuélien. Amer, complexe, long en bouche. Le goût de la discipline.</div></div>
                        <div class="branch-product-card"><div class="product-num">02</div><div class="product-name">Collection Épices</div><div class="product-desc">Poivre long de Java, cardamome noire, fleur de sel de Guérande. Pour les palais qui refusent la médiocrité.</div></div>
                        <div class="branch-product-card"><div class="product-num">03</div><div class="product-name">Coffret Fondateur</div><div class="product-desc">12 ganaches, 3 origines, 1 tablette grand cru. Offert aux membres lors de leur intégration officielle.</div></div>
                    </div>
                </div>
            </div>

            <!-- PRODUCTION -->
            <div class="branch-panel" id="branch-production">
                <div class="branch-hero">
                    <div class="branch-hero-gradient" style="background: linear-gradient(135deg, rgba(80,120,100,0.04) 0%, transparent 60%), linear-gradient(to top, #080808 30%, transparent 100%);"></div>
                    <div class="branch-hero-content">
                        <div class="branch-eyebrow">Burton — Division Créative</div>
                        <div class="branch-name">Production</div>
                        <div class="branch-tagline">Derrière chaque grand projet, une infrastructure invisible et redoutable.</div>
                    </div>
                </div>
                <div class="branch-body">
                    <div class="branch-desc">
                        Burton Production est le moteur créatif et opérationnel de l'organisation. Audiovisuel, direction artistique, stratégie de contenu, événementiel interne — cette division transforme les ambitions de Burton Corporation en réalisations concrètes et mémorables.
                    </div>
                    <div class="branch-details">
                        <div class="branch-detail-row"><span class="branch-detail-key">Périmètre</span><span class="branch-detail-val">Audiovisuel, direction artistique, stratégie éditoriale</span></div>
                        <div class="branch-detail-row"><span class="branch-detail-key">Rôle interne</span><span class="branch-detail-val">Soutien créatif de toutes les autres branches Burton</span></div>
                        <div class="branch-detail-row"><span class="branch-detail-key">Output</span><span class="branch-detail-val">Contenu exclusif, campagnes internes, archives visuelles</span></div>
                        <div class="branch-detail-row"><span class="branch-detail-key">Accès</span><span class="branch-detail-val">Division fermée — recrutement interne uniquement</span></div>
                    </div>
                </div>
                <div class="branch-products" style="max-width:1300px;margin:0 auto;">
                    <div class="branch-products-title">Activités</div>
                    <div class="branch-products-grid">
                        <div class="branch-product-card"><div class="product-num">01</div><div class="product-name">Burton Archives</div><div class="product-desc">Documentation visuelle de l'histoire de l'organisation. Chaque moment important, capturé et préservé.</div></div>
                        <div class="branch-product-card"><div class="product-num">02</div><div class="product-name">Contenu Stratégique</div><div class="product-desc">Production de supports de communication internes et externes. L'image Burton, contrôlée à chaque pixel.</div></div>
                        <div class="branch-product-card"><div class="product-num">03</div><div class="product-name">Événementiel</div><div class="product-desc">Organisation des cérémonies d'intégration, sessions de direction et rencontres annuelles de Burton Corp.</div></div>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <!-- ========================================
         PANNEAU ADMIN INTERNE
    ======================================== -->
    <div class="admin-overlay" id="adminOverlay">

        <!-- Lock Screen (PIN) -->
        <div class="admin-lock" id="adminLock">
            <div class="admin-lock-logo">BURTON</div>
            <h2 class="admin-lock-title">Espace Interne</h2>
            <p class="admin-lock-sub">Saisissez votre code d'accès</p>
            <div class="admin-pin-row" id="pinDots">
                <div class="admin-pin-dot" id="dot-0"></div>
                <div class="admin-pin-dot" id="dot-1"></div>
                <div class="admin-pin-dot" id="dot-2"></div>
                <div class="admin-pin-dot" id="dot-3"></div>
            </div>
            <div class="admin-keypad">
                <button class="admin-key" data-k="1">1</button>
                <button class="admin-key" data-k="2">2</button>
                <button class="admin-key" data-k="3">3</button>
                <button class="admin-key" data-k="4">4</button>
                <button class="admin-key" data-k="5">5</button>
                <button class="admin-key" data-k="6">6</button>
                <button class="admin-key" data-k="7">7</button>
                <button class="admin-key" data-k="8">8</button>
                <button class="admin-key" data-k="9">9</button>
                <button class="admin-key del" data-k="del">⌫</button>
                <button class="admin-key zero" data-k="0">0</button>
            </div>
            <div class="admin-lock-error" id="pinError">Code incorrect</div>
            <button class="admin-close-lock" id="adminCloseLock">Quitter ↗</button>
        </div>

        <!-- Dashboard -->
        <div class="admin-dashboard" id="adminDashboard">
            <div class="admin-header">
                <div class="admin-header-left">
                    <span class="admin-logo">BC</span>
                    <span class="admin-title">Candidatures</span>
                    <span class="admin-badge-total" id="adminTotalBadge">0 reçues</span>
                </div>
                <div class="admin-header-right">
                    <div class="admin-filter-bar">
                        <button class="admin-filter-btn active" data-filter="all">Toutes</button>
                        <button class="admin-filter-btn" data-filter="new">Nouvelles</button>
                        <button class="admin-filter-btn" data-filter="review">En cours</button>
                        <button class="admin-filter-btn" data-filter="accepted">Acceptées</button>
                        <button class="admin-filter-btn" data-filter="rejected">Refusées</button>
                    </div>
                    <button class="admin-exit" id="adminRefresh" style="margin-right:0.5rem;">↻ Actualiser</button>
                    <button class="admin-exit" id="adminExit">Verrouiller</button>
                </div>
            </div>
            <div class="admin-search-row">
                <input class="admin-search" type="text" id="adminSearch" placeholder="Rechercher par nom, e-mail, nationalité...">
            </div>
            <div class="admin-body">
                <div class="admin-stats-row">
                    <div class="admin-stat-card">
                        <div class="admin-stat-val" id="statTotal">0</div>
                        <div class="admin-stat-lbl">Total reçues</div>
                    </div>
                    <div class="admin-stat-card">
                        <div class="admin-stat-val" id="statNew">0</div>
                        <div class="admin-stat-lbl">Nouvelles</div>
                    </div>
                    <div class="admin-stat-card">
                        <div class="admin-stat-val" id="statAccepted">0</div>
                        <div class="admin-stat-lbl">Acceptées</div>
                    </div>
                    <div class="admin-stat-card">
                        <div class="admin-stat-val" id="statRejected">0</div>
                        <div class="admin-stat-lbl">Refusées</div>
                    </div>
                </div>
                <div class="admin-table-wrap">
                    <table class="admin-table">
                        <thead>
                            <tr>
                                <th>Candidat</th>
                                <th>E-mail</th>
                                <th>Âge</th>
                                <th>Nationalité</th>
                                <th>Disponibilité</th>
                                <th>Valeur</th>
                                <th>Statut</th>
                                <th>Reçue le</th>
                            </tr>
                        </thead>
                        <tbody id="adminTableBody"></tbody>
                    </table>
                    <div class="admin-empty" id="adminEmpty" style="display:none;">
                        <div class="admin-empty-icon">◇</div>
                        <div class="admin-empty-text">Aucune candidature pour le moment</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Detail Panel -->
    <div class="admin-detail" id="adminDetail">
        <div class="detail-header">
            <span style="font-size:0.65rem;letter-spacing:0.25em;color:var(--color-text-subtle);text-transform:uppercase;">Dossier</span>
            <button class="detail-close" id="detailClose">Fermer ×</button>
        </div>
        <div class="detail-body" id="detailBody"></div>
    </div>

    <script>
    // ========================================
    // BRANCHES OVERLAY
    // ========================================
    const branchesOverlay  = document.getElementById('branchesOverlay');
    const branchesNavLink  = document.getElementById('branchesNavLink');
    const branchesCloseBtn = document.getElementById('branchesClose');

    branchesNavLink.addEventListener('click', (e) => {
        e.preventDefault();
        branchesOverlay.classList.add('open');
        document.body.style.overflow = 'hidden';
    });

    branchesCloseBtn.addEventListener('click', () => {
        branchesOverlay.classList.remove('open');
        document.body.style.overflow = '';
    });

    document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && branchesOverlay.classList.contains('open')) {
            branchesOverlay.classList.remove('open');
            document.body.style.overflow = '';
        }
    });

    // Branch tabs
    document.querySelectorAll('.branch-tab').forEach(tab => {
        tab.addEventListener('click', () => {
            document.querySelectorAll('.branch-tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.branch-panel').forEach(p => p.classList.remove('active'));
            tab.classList.add('active');
            document.getElementById('branch-' + tab.dataset.branch).classList.add('active');
            branchesOverlay.scrollTo({ top: 0, behavior: 'smooth' });
        });
    });

    // ========================================
    // ADMIN PANEL
    // ========================================
    const ADMIN_PIN = '0310'; // ← Modifier ce code PIN
    const ALLOWED_NATIONALITIES = ['fr','be','ch','ca','lu','de','es','it','pt','nl','gb','pl','ro'];
    const ALLOWED_DISPO = ['>20'];

    const adminOverlay   = document.getElementById('adminOverlay');
    const adminLock      = document.getElementById('adminLock');
    const adminDashboard = document.getElementById('adminDashboard');
    const adminNavLink   = document.getElementById('adminNavLink');
    const adminCloseLock = document.getElementById('adminCloseLock');
    const adminExit      = document.getElementById('adminExit');
    const adminDetail    = document.getElementById('adminDetail');
    const detailClose    = document.getElementById('detailClose');
    const adminSearch    = document.getElementById('adminSearch');

    let pinBuffer = '';
    let currentFilter = 'all';
    let applications = [];
    let activeDetailId = null;

    function reloadApps() {
        applications = JSON.parse(localStorage.getItem('bc_applications') || '[]');
    }

    // ---- Nav link click ----
    adminNavLink.addEventListener('click', (e) => {
        e.preventDefault();
        pinBuffer = '';
        updatePinDots();
        adminLock.style.display = 'block';
        adminDashboard.classList.remove('visible');
        adminOverlay.classList.add('open');
    });

    adminCloseLock.addEventListener('click', closeAdmin);
    document.getElementById('adminRefresh').addEventListener('click', renderDashboard);
    adminExit.addEventListener('click', () => {
        pinBuffer = '';
        updatePinDots();
        adminDashboard.classList.remove('visible');
        adminLock.style.display = 'block';
    });

    function closeAdmin() {
        adminOverlay.classList.remove('open');
        adminDetail.classList.remove('open');
        pinBuffer = '';
        updatePinDots();
    }

    document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && adminOverlay.classList.contains('open')) closeAdmin();
    });

    // ---- PIN Keypad ----
    document.querySelectorAll('.admin-key').forEach(btn => {
        btn.addEventListener('click', () => {
            const k = btn.dataset.k;
            if (k === 'del') {
                pinBuffer = pinBuffer.slice(0, -1);
            } else if (pinBuffer.length < 4) {
                pinBuffer += k;
            }
            updatePinDots();
            if (pinBuffer.length === 4) checkPin();
        });
    });

    function updatePinDots() {
        for (let i = 0; i < 4; i++) {
            document.getElementById(`dot-${i}`).classList.toggle('filled', i < pinBuffer.length);
        }
    }

    function checkPin() {
        if (pinBuffer === ADMIN_PIN) {
            adminLock.style.display = 'none';
            adminDashboard.classList.add('visible');
            document.getElementById('pinError').classList.remove('show');
            reloadApps();
            renderDashboard();
        } else {
            const err = document.getElementById('pinError');
            err.classList.add('show');
            pinBuffer = '';
            updatePinDots();
            setTimeout(() => err.classList.remove('show'), 2000);
        }
    }

    // ---- Filters ----
    document.querySelectorAll('.admin-filter-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            document.querySelectorAll('.admin-filter-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            currentFilter = btn.dataset.filter;
            renderTable(getFiltered());
        });
    });

    adminSearch.addEventListener('input', () => renderTable(getFiltered()));

    function getFiltered() {
        const q = adminSearch.value.toLowerCase().trim();
        return applications.filter(a => {
            const matchFilter = currentFilter === 'all' || a.status === currentFilter;
            const matchSearch = !q || 
                `${a.prenom} ${a.nom}`.toLowerCase().includes(q) ||
                a.email.toLowerCase().includes(q) ||
                a.nationalite.toLowerCase().includes(q);
            return matchFilter && matchSearch;
        });
    }

    // ---- Render ----
    function renderDashboard() {
        reloadApps();
        updateStats();
        renderTable(getFiltered());
    }

    function updateStats() {
        document.getElementById('statTotal').textContent    = applications.length;
        document.getElementById('statNew').textContent      = applications.filter(a => a.status === 'new').length;
        document.getElementById('statAccepted').textContent = applications.filter(a => a.status === 'accepted').length;
        document.getElementById('statRejected').textContent = applications.filter(a => a.status === 'rejected').length;
        document.getElementById('adminTotalBadge').textContent = `${applications.length} reçues`;
    }

    const natLabels = {
        fr:'Française',be:'Belge',ch:'Suisse',ca:'Canadienne',lu:'Luxembourgeoise',
        ma:'Marocaine',dz:'Algérienne',tn:'Tunisienne',sn:'Sénégalaise',ci:'Ivoirienne',
        cm:'Camerounaise',ml:'Malienne',gn:'Guinéenne',cd:'Congolaise (RDC)',ga:'Gabonaise',
        de:'Allemande',es:'Espagnole',it:'Italienne',pt:'Portugaise',nl:'Néerlandaise',
        gb:'Britannique',pl:'Polonaise',ro:'Roumaine',us:'Américaine',br:'Brésilienne',other:'Autre'
    };

    const dispoLabels = {
        '<5':'< 5h / sem','5-10':'5–10h / sem','10-20':'10–20h / sem','>20':'20h+ / sem'
    };

    const valeurLabels = {
        reussite:'Réussite', progres:'Progrès', excellence:'Excellence', loyaute:'Loyauté'
    };

    const statusBadge = {
        new: '<span class="badge badge-new">Nouveau</span>',
        review: '<span class="badge badge-review">En cours</span>',
        accepted: '<span class="badge badge-accepted">Accepté</span>',
        rejected: '<span class="badge badge-rejected">Refusé</span>'
    };

    function formatDate(ts) {
        return new Date(ts).toLocaleDateString('fr-FR', { day:'2-digit', month:'short', year:'numeric', hour:'2-digit', minute:'2-digit' });
    }

    function renderTable(data) {
        const tbody = document.getElementById('adminTableBody');
        const empty = document.getElementById('adminEmpty');
        tbody.innerHTML = '';

        if (!data.length) {
            empty.style.display = 'block';
            return;
        }
        empty.style.display = 'none';

        data.slice().reverse().forEach(app => {
            const tr = document.createElement('tr');
            tr.innerHTML = `
                <td class="name-col">${app.prenom} ${app.nom.toUpperCase()}</td>
                <td>${app.email}</td>
                <td>${app.age} ans</td>
                <td>${natLabels[app.nationalite] || app.nationalite}</td>
                <td>${dispoLabels[app.dispo] || app.dispo}</td>
                <td>${valeurLabels[app.valeur] || '—'}</td>
                <td>${statusBadge[app.status] || ''}</td>
                <td style="white-space:nowrap;font-size:0.75rem;">${formatDate(app.ts)}</td>
            `;
            tr.addEventListener('click', () => openDetail(app.id));
            tbody.appendChild(tr);
        });
    }

    // ---- Detail Panel ----
    function openDetail(id) {
        const app = applications.find(a => a.id === id);
        if (!app) return;
        activeDetailId = id;

        // Mark as 'review' if still new
        if (app.status === 'new') {
            app.status = 'review';
            saveApps();
            updateStats();
            renderTable(getFiltered());
        }

        const body = document.getElementById('detailBody');
        body.innerHTML = `
            <div class="detail-name">${app.prenom} ${app.nom.toUpperCase()}</div>
            <div class="detail-ref">${app.ref} · ${formatDate(app.ts)}</div>

            <div class="detail-section">
                <div class="detail-section-title">Identité</div>
                <div class="detail-row"><span class="detail-key">E-mail</span><span class="detail-val">${app.email}</span></div>
                <div class="detail-row"><span class="detail-key">Âge</span><span class="detail-val">${app.age} ans</span></div>
                <div class="detail-row"><span class="detail-key">Nationalité</span><span class="detail-val">${natLabels[app.nationalite] || app.nationalite}</span></div>
                <div class="detail-row"><span class="detail-key">Disponibilité</span><span class="detail-val">${dispoLabels[app.dispo] || app.dispo}</span></div>
            </div>

            <div class="detail-section">
                <div class="detail-section-title">Motivation & Valeurs</div>
                <div class="detail-section-title" style="border:none;padding:0;margin-bottom:0.5rem;font-size:0.6rem;">Valeur principale : ${valeurLabels[app.valeur] || '—'}</div>
                <div class="detail-text-block">${app.motivation || '—'}</div>
                <div class="detail-section-title" style="border:none;padding:0;margin:1rem 0 0.5rem;font-size:0.6rem;">Apport personnel</div>
                <div class="detail-text-block">${app.apport || '—'}</div>
            </div>

            <div class="detail-section">
                <div class="detail-section-title">Expérience & Aptitudes</div>
                <div class="detail-row"><span class="detail-key">Expérience</span><span class="detail-val">${app.experience || '—'}</span></div>
                <div class="detail-row"><span class="detail-key">Travail d'équipe</span><span class="detail-val">${app.ratingEquipe ? app.ratingEquipe + '/10' : '—'}</span></div>
                <div class="detail-row"><span class="detail-key">Gestion pression</span><span class="detail-val">${app.ratingPression ? app.ratingPression + '/10' : '—'}</span></div>
                <div class="detail-row"><span class="detail-key">Compétences</span><span class="detail-val">${(app.competences && app.competences.length) ? app.competences.join(', ') : '—'}</span></div>
                ${app.detailExp ? `<div class="detail-text-block">${app.detailExp}</div>` : ''}
            </div>

            <div class="detail-section">
                <div class="detail-section-title">Engagement & Finalisation</div>
                <div class="detail-section-title" style="border:none;padding:0;margin-bottom:0.5rem;font-size:0.6rem;">Objectif 6 mois</div>
                <div class="detail-text-block">${app.objectif || '—'}</div>
                <div class="detail-section-title" style="border:none;padding:0;margin:1rem 0 0.5rem;font-size:0.6rem;">Défi surmonté</div>
                <div class="detail-text-block">${app.defi || '—'}</div>
                <div class="detail-row"><span class="detail-key">Source</span><span class="detail-val">${app.comment || '—'}</span></div>
            </div>

            ${(app.aiScore !== null && app.aiScore !== undefined) ? `
            <div class="detail-section">
                <div class="detail-section-title">Analyse IA</div>
                <div class="detail-row">
                    <span class="detail-key">Score</span>
                    <span class="detail-val" style="font-family:var(--font-display);font-size:1.1rem;">${app.aiScore}<span style="font-size:0.7rem;color:var(--color-text-subtle)">/100</span></span>
                </div>
                <div class="detail-row"><span class="detail-key">Verdict</span><span class="detail-val">${app.aiReason || '—'}</span></div>
            </div>` : ''}

            <div class="detail-actions">
                <button class="btn-action accept" onclick="setStatus('${id}','accepted')">✓ Accepter</button>
                <button class="btn-action" onclick="setStatus('${id}','review')">↻ En cours</button>
                <button class="btn-action reject" onclick="setStatus('${id}','rejected')">✕ Refuser</button>
            </div>
        `;
        adminDetail.classList.add('open');
    }

    detailClose.addEventListener('click', () => adminDetail.classList.remove('open'));

    window.setStatus = function(id, status) {
        const app = applications.find(a => a.id === id);
        if (app) {
            app.status = status;
            saveApps();
            updateStats();
            renderTable(getFiltered());
            openDetail(id);
        }
    };

    function saveApps() {
        localStorage.setItem('bc_applications', JSON.stringify(applications));
    }

    // ========================================
    // CONFIG GOOGLE SHEETS
    // ========================================
    const GOOGLE_SHEET_URL = 'https://script.google.com/macros/s/AKfycbwLlBylC344mWSkO4ybEuqbMweYNOmJaU5cgsUzSPehK-68XBAPpRt7yORIopooWLqNjA/exec';
    const GOOGLE_SHEETS_ENABLED = true; // ✅ Activé — les candidatures vont dans Google Sheets
    
    const GOOGLE_SHEET_REJECTED_URL = 'https://script.google.com/macros/s/AKfycbxgQ8LwLwjMWCKSliFhiOYivE38ugOdx-UzR9ulUpdmrVtb3uIlcao1Y0sc4Lc4Mr77PA/exec';
    const REJECTED_SHEETS_ENABLED = true; // ✅ Activé — les candidatures rejetées vont dans un 2e Sheet

    // ========================================
    // CONFIG EMAILJS
    // ========================================
    const EMAILJS_PUBLIC_KEY  = 'cI12kdK1EJZEsQQRO';
    const EMAILJS_SERVICE_ID  = 'service_c6ka75f';
    const EMAILJS_TEMPLATE_ID = 'template_9q6yprl';
    const EMAILJS_ENABLED     = false; // Désactivé pour gestion manuelle

    // ========================================
    // HOOK — Intercept form submission (async)
    // ========================================
    async function submitApplication() {
        // ── 1. Collect data ──────────────────────────────────────────
        const age      = parseInt(document.getElementById('f-age')?.value || 0);
        const natVal   = document.getElementById('f-nationalite')?.value || '';
        const dispoVal = document.getElementById('f-disponibilite')?.value || '';
        const valeur   = document.querySelector('input[name="valeur"]:checked')?.value || '';
        const prenom   = document.getElementById('f-prenom')?.value.trim() || '';
        const nom      = document.getElementById('f-nom')?.value.trim() || '';
        const email    = document.getElementById('f-email')?.value.trim() || '';
        const motivation   = document.getElementById('f-motivation')?.value.trim() || '';
        const apport       = document.getElementById('f-apport')?.value.trim() || '';
        const objectif     = document.getElementById('f-objectif')?.value.trim() || '';
        const defi         = document.getElementById('f-defi')?.value.trim() || '';
        const detailExp    = document.getElementById('f-detail-exp')?.value.trim() || '';

        // ── 2. Générer une référence pour tout le monde ──────────────
        const ref = 'BC-' + Date.now().toString(36).toUpperCase().slice(-6);

        // ── 3. Envoyer l'email de confirmation à TOUS les candidats ──
        if (EMAILJS_ENABLED && email) {
            try {
                const emailPayload = {
                    service_id:  EMAILJS_SERVICE_ID,
                    template_id: EMAILJS_TEMPLATE_ID,
                    user_id:     EMAILJS_PUBLIC_KEY,
                    template_params: {
                        ref,
                        candidat_nom:    `${prenom} ${nom.toUpperCase()}`,
                        candidat_email:  email,
                        candidat_age:    age,
                        nationalite:     natLabels[natVal] || natVal,
                        disponibilite:   dispoLabels[dispoVal] || dispoVal,
                        valeur:          valeurLabels[valeur] || valeur,
                        motivation,
                        apport,
                        objectif,
                        defi,
                        experience:      document.getElementById('f-experience')?.value || '',
                        competences:     [...document.querySelectorAll('input[name="competence"]:checked')].map(c => c.value).join(', ') || '—',
                        rating_equipe:   document.querySelector('#rating-equipe .rating-btn.selected')?.dataset.value ? document.querySelector('#rating-equipe .rating-btn.selected').dataset.value + '/10' : '—',
                        rating_pression: document.querySelector('#rating-pression .rating-btn.selected')?.dataset.value ? document.querySelector('#rating-pression .rating-btn.selected').dataset.value + '/10' : '—',
                        ai_score:        '—',
                        ai_reason:       '—',
                        date_soumission: new Date().toLocaleString('fr-FR'),
                    }
                };

                const emailRes = await fetch('https://api.emailjs.com/api/v1.0/email/send', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(emailPayload)
                });

                if (emailRes.ok) {
                    console.log('✓ Email de confirmation envoyé');
                } else {
                    const errText = await emailRes.text();
                    console.error('✗ EmailJS API error:', emailRes.status, errText);
                }
            } catch (emailErr) {
                console.error('✗ EmailJS fetch error:', emailErr.message);
            }
        }

        // ── 4. Filtres durs (age / nat / dispo) — silencieux ─────────
        const passAge   = age >= 18;
        const passNat   = ALLOWED_NATIONALITIES.includes(natVal);
        const passDispo = ALLOWED_DISPO.includes(dispoVal);

        if (!passAge || !passNat || !passDispo) {
            // ── 4b. Envoyer les candidatures rejetées dans un 2e Sheet ───
            if (REJECTED_SHEETS_ENABLED) {
                try {
                    const rejectedData = new FormData();
                    rejectedData.append('reference', ref);
                    rejectedData.append('nom', nom);
                    rejectedData.append('prenom', prenom);
                    rejectedData.append('email', email);
                    rejectedData.append('raison', !passAge ? 'Âge < 18' : !passNat ? 'Nationalité hors Europe' : 'Disponibilité < 20h/sem');

                    await fetch(GOOGLE_SHEET_REJECTED_URL, {
                        method: 'POST',
                        body: rejectedData
                    });

                    console.log('✓ Candidature rejetée enregistrée');
                } catch (err) {
                    console.error('✗ Rejected sheets error:', err.message);
                }
            }
            
            showSuccessFinal(ref);
            return;
        }

        // ── 5. Analyse IA des textes ─────────────────────────────────
        let aiPasses = true;
        let aiScore  = null;
        let aiReason = '';

        try {
            const prompt = `Tu es le responsable RH interne de Burton Corporation, une organisation d'élite fictive très sélective.
Analyse les réponses textuelles de ce candidat selon ces 4 critères stricts :
1. LONGUEUR & PRÉCISION : Les réponses sont-elles suffisamment développées et précises ? (rejeter si trop courtes ou vagues)
2. ORTHOGRAPHE : Y a-t-il des fautes d'orthographe ou de grammaire excessives ? (rejeter si plus de 3 fautes significatives)
3. MOTIVATION : Le candidat semble-t-il vraiment motivé ? Le texte paraît-il copié-collé, générique ou sans effort ? (rejeter si manque de sincérité)
4. COHÉRENCE : Les réponses sont-elles cohérentes avec les valeurs de Burton Corporation (Réussite, Progrès, Excellence, Loyauté) ?

Voici les réponses du candidat :
— Valeur principale choisie : ${valeur}
— Motivation : "${motivation}"
— Apport personnel : "${apport}"
— Objectif 6 mois : "${objectif}"
— Défi surmonté : "${defi}"
${detailExp ? `— Expérience détaillée : "${detailExp}"` : ''}

Réponds UNIQUEMENT en JSON strict (sans markdown) avec ce format exact :
{"pass": true/false, "score": 0-100, "reason": "explication courte en français (1-2 phrases max)"}`;

            const controller = new AbortController();
            const timeoutId = setTimeout(() => controller.abort(), 10000);

            let response;
            try {
                response = await fetch('https://api.anthropic.com/v1/messages', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        model: 'claude-sonnet-4-20250514',
                        max_tokens: 200,
                        messages: [{ role: 'user', content: prompt }]
                    })
                });
            } finally {
                clearTimeout(timeoutId);
            }

            if (response.ok) {
                const data = await response.json();
                const raw  = data.content?.[0]?.text || '';
                const clean = raw.replace(/```json|```/g, '').trim();
                const parsed = JSON.parse(clean);
                aiPasses = parsed.pass === true;
                aiScore  = parsed.score ?? null;
                aiReason = parsed.reason ?? '';
            }
        } catch (err) {
            console.warn('AI analysis skipped:', err.message);
            aiPasses = true;
        }

        if (!aiPasses) {
            // ── 5b. Enregistrer aussi les refus IA ──────────────────────
            if (REJECTED_SHEETS_ENABLED) {
                try {
                    const rejectedData = new FormData();
                    rejectedData.append('reference', ref);
                    rejectedData.append('nom', nom);
                    rejectedData.append('prenom', prenom);
                    rejectedData.append('email', email);
                    rejectedData.append('raison', `IA: ${aiReason || 'Critères non satisfaits'}`);

                    await fetch(GOOGLE_SHEET_REJECTED_URL, {
                        method: 'POST',
                        body: rejectedData
                    });

                    console.log('✓ Candidature rejetée (IA) enregistrée');
                } catch (err) {
                    console.error('✗ Rejected sheets error:', err.message);
                }
            }
            
            showSuccessFinal(ref);
            return;
        }

        // ── 6. Build & save application object ───────────────────────
        const app = {
            id: 'app_' + Date.now(),
            ref,
            ts: Date.now(),
            status: 'new',
            prenom, nom, age, email, nationalite: natVal, dispo: dispoVal, valeur,
            motivation, apport, objectif, defi, detailExp,
            experience:    document.getElementById('f-experience')?.value || '',
            ratingEquipe:  document.querySelector('#rating-equipe .rating-btn.selected')?.dataset.value || '',
            ratingPression:document.querySelector('#rating-pression .rating-btn.selected')?.dataset.value || '',
            competences:   [...document.querySelectorAll('input[name="competence"]:checked')].map(c => c.value),
            comment:       document.getElementById('f-comment')?.value || '',
            aiScore, aiReason
        };

        // ── 6b. Envoyer vers Google Sheets ──────────────────────────
        if (GOOGLE_SHEETS_ENABLED) {
            try {
                const sheetData = new FormData();
                sheetData.append('timestamp', new Date(app.ts).toLocaleString('fr-FR'));
                sheetData.append('reference', app.ref);
                sheetData.append('prenom', app.prenom);
                sheetData.append('nom', app.nom);
                sheetData.append('age', app.age);
                sheetData.append('email', app.email);
                sheetData.append('nationalite', natLabels[app.nationalite] || app.nationalite);
                sheetData.append('disponibilite', dispoLabels[app.dispo] || app.dispo);
                sheetData.append('valeur', valeurLabels[app.valeur] || app.valeur);
                sheetData.append('motivation', app.motivation);
                sheetData.append('apport', app.apport);
                sheetData.append('objectif', app.objectif);
                sheetData.append('defi', app.defi);
                sheetData.append('experience', app.experience);
                sheetData.append('detailExp', app.detailExp);
                sheetData.append('ratingEquipe', app.ratingEquipe ? app.ratingEquipe + '/10' : '—');
                sheetData.append('ratingPression', app.ratingPression ? app.ratingPression + '/10' : '—');
                sheetData.append('competences', app.competences.join(', ') || '—');
                sheetData.append('comment', app.comment || '—');
                sheetData.append('aiScore', app.aiScore !== null ? app.aiScore + '/100' : '—');
                sheetData.append('aiReason', app.aiReason || '—');
                sheetData.append('statut', app.status);

                await fetch(GOOGLE_SHEET_URL, {
                    method: 'POST',
                    body: sheetData
                });

                console.log('✓ Candidature enregistrée dans Google Sheets');
            } catch (sheetErr) {
                console.error('✗ Google Sheets error:', sheetErr.message);
            }
        }

        // ── 6c. Save to localStorage (backup local) ──────────────────
        const stored = JSON.parse(localStorage.getItem('bc_applications') || '[]');
        stored.push(app);
        localStorage.setItem('bc_applications', JSON.stringify(stored));
        if (typeof applications !== 'undefined') {
            applications.length = 0;
            stored.forEach(a => applications.push(a));
        }

        // ── 7. Show success ──────────────────────────────────────────
        showSuccessFinal(ref);
    }

    function showSuccessFinal(ref) {
        document.getElementById('success-analyzing').style.display = 'none';
        document.getElementById('success-final').style.display     = 'block';
        document.getElementById('success-ref').textContent = `Référence — ${ref}`;
        document.getElementById('stepIndicator').textContent = 'Candidature envoyée';
    }

    // Wire up btnNext & btnPrev (replacing the buttons to avoid duplicate listeners)
    (function patchSubmit() {
        const btn = document.getElementById('btnNext');
        const newBtn = btn.cloneNode(true);
        btn.parentNode.replaceChild(newBtn, btn);
        window._btnNext = newBtn;

        newBtn.addEventListener('click', async () => {
            if (typeof validateStep === 'function' && validateStep(currentStep)) {
                if (currentStep === TOTAL_STEPS) {
                    goToStep(currentStep + 1); // show analyzing screen immediately
                    await submitApplication(); // then run async analysis
                } else {
                    goToStep(currentStep + 1);
                }
            }
        });

        const btnPrevEl = document.getElementById('btnPrev');
        const newPrev = btnPrevEl.cloneNode(true);
        btnPrevEl.parentNode.replaceChild(newPrev, btnPrevEl);
        newPrev.addEventListener('click', () => {
            if (currentStep > 1) goToStep(currentStep - 1);
        });
    })();
    </script>
</body>
</html>
